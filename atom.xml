<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
    <id>https://dustmm.github.io</id>
    <title>Dustin Blog</title>
    <updated>2024-08-20T03:41:00.633Z</updated>
    <generator>https://github.com/jpmonette/feed</generator>
    <link rel="alternate" href="https://dustmm.github.io"/>
    <link rel="self" href="https://dustmm.github.io/atom.xml"/>
    <subtitle>æ±‚ä»¥æ¬¢å–œä¹‹å¿ƒï¼Œé¢†å²æœˆä¹‹æ•™è¯²</subtitle>
    <logo>https://dustmm.github.io/images/avatar.png</logo>
    <icon>https://dustmm.github.io/favicon.ico</icon>
    <rights>All rights reserved 2024, Dustin Blog</rights>
    <entry>
        <title type="html"><![CDATA[è®¾å¤‡ç¡¬ä»¶åŠŸèƒ½æµ‹è¯•]]></title>
        <id>https://dustmm.github.io/post/hardware/</id>
        <link href="https://dustmm.github.io/post/hardware/">
        </link>
        <updated>2024-08-01T09:27:02.000Z</updated>
        <content type="html"><![CDATA[<p>ğŸ‘ æ¬¢è¿ä½¿ç”¨<strong>OpenWrt</strong>ï¼Œæœ¬æ–‡ä¸»è¦è®°å½•åŸºäº OpenWrt ç¯å¢ƒä¸‹å®ç°çš„ä¸€äº›è®¾å¤‡ç¡¬ä»¶åŠŸèƒ½ä¸Šçš„ç®€å•çš„æµ‹è¯•æ–¹æ¡ˆï¼</p>
<h2 id="led-æµ‹è¯•">ğŸ‘‡ LED æµ‹è¯•</h2>
<ul>
<li>LED çš„æ¥å£åœ¨ /sys/class/leds/ ä¸‹é¢ï¼Œä»¥ WiFi çš„ LED ä¸ºä¾‹ã€‚</li>
</ul>
<pre><code class="language-bash">echo 1 &gt; /sys/class/leds/wifi/brightness        # ç‚¹äº®
echo 0 &gt; /sys/class/leds/wifi/brightness        # ç†„ç­
</code></pre>
<h2 id="rtc-æµ‹è¯•">ğŸ‘‡ RTC æµ‹è¯•</h2>
<ul>
<li>ä½¿ç”¨ dateã€hwclock æŒ‡ä»¤ï¼Œè¿›è¡Œ RTC æ—¶é—´è®¾ç½®ï¼Œå¹¶è¯»å–å¯¹æ¯”ã€‚</li>
</ul>
<pre><code class="language-bash">date -s &quot;2020-06-18 15:25:00&quot;       # è®¾ç½®ç³»ç»Ÿæ—¶é—´
hwclock -w                                       # åŒæ­¥ç³»ç»Ÿæ—¶é—´åˆ°RTCä¸­
date                                                  # æŸ¥çœ‹ç³»ç»Ÿæ—¶é—´
hwclock                                            # æŸ¥çœ‹RTCæ—¶é—´
</code></pre>
<h2 id="reset-æŒ‰é”®æµ‹è¯•">ğŸ‘‡ Reset æŒ‰é”®æµ‹è¯•</h2>
<ul>
<li>è¾“å…¥å‘½ä»¤åï¼ŒæŒ‰é”®æ—¶æœ‰å†…å®¹è¾“å‡ºï¼Œåˆ™éªŒè¯é€šè¿‡ã€‚</li>
</ul>
<pre><code class="language-bash">cat /dev/input/event0 | hexdump
</code></pre>
<h2 id="å­˜å‚¨è®¾å¤‡æµ‹è¯•">ğŸ‘‡ å­˜å‚¨è®¾å¤‡æµ‹è¯•</h2>
<ul>
<li>ä½¿ç”¨ cpã€diff æŒ‡ä»¤ï¼Œè¿›è¡Œæ–‡ä»¶è¯»å†™æµ‹è¯•ã€‚</li>
</ul>
<pre><code class="language-bash">mount /dev/sda1 /mnt    # æŒ‚è½½Uç›˜
cp test /mnt                      # æ‹·è´testæ–‡ä»¶åˆ°Uç›˜æŒ‚è½½çš„ç›®å½•
diff test /mnt/test            # æ¯”å¯¹ä¸¤ä¸ªæ–‡ä»¶çš„åŒºåˆ«
</code></pre>
<h2 id="ç½‘å¡ç½‘å£æµ‹è¯•">ğŸ‘‡ ç½‘å¡ç½‘å£æµ‹è¯•</h2>
<ul>
<li>é…ç½®ç½‘æ¡¥ ping åŒ…æ–¹å¼ã€‚</li>
</ul>
<pre><code class="language-bash">for intf in $(ls /sys/class/net/ | grep eth); do ifconfig $intf up; done                            # ä½¿èƒ½ä¸Šè”å£
brctl addbr br-lan                                                                                                               # åˆ›å»ºç½‘æ¡¥
for intf in $(ls /sys/class/net/ | grep -P 'lan|wan'); do brctl addif br-lan $intf; done    # å¾€æ¡¥å†…æ·»åŠ ç½‘å£èŠ‚ç‚¹
for intf in $(ls /sys/class/net/ | grep -P 'lan|wan'); do ifconfig $intf up; done              # æŠŠå¯¹åº”ç½‘å£èŠ‚ç‚¹å¯ç”¨
ifconfig br-lan 192.168.100.1                                                                                            # ç»™æ¡¥é…ç½®IPåœ°å€
ping 192.168.100.212                                                                                                        # å¾€å¯¹ç«¯ï¼ˆPCç«¯ï¼‰pingåŒ…ï¼ˆPCçš„IPåœ°å€ï¼‰
</code></pre>
<h2 id="4g5g-æ¨¡å—æµ‹è¯•">ğŸ‘‡ 4G/5G æ¨¡å—æµ‹è¯•</h2>
<ul>
<li>ä¿®æ”¹å†…æ ¸ä»£ç ï¼Œæ›´æ”¹ 4G/5G ç½‘å£åå­—ã€‚</li>
</ul>
<pre><code class="language-bash">vi drivers/net/usb/usbnet.c
######æ–‡ä»¶ä¿®æ”¹å†…å®¹å¦‚ä¸‹######
strcpy (net-&gt;name, &quot;usb%d&quot;);
######æ–‡ä»¶ä¿®æ”¹å†…å®¹ç»“æŸ######
</code></pre>
<ul>
<li>æºç å¢åŠ æ¨¡å— USB è½¬ä¸²å£é©±åŠ¨ï¼Œoption_ids ç»“æ„ä½“åˆ—è¡¨ä¸­å¢åŠ æ¨¡å—çš„ vid:pidï¼Œæ ¹æ®å‚å®¶æ‰‹å†Œï¼Œå±è”½å¯¹åº”çš„ usb ç«¯å£ï¼Œå¢åŠ äº†é«˜å…´æ–°çš„ 4Gã€5G æ¨¡å— idï¼ŒåŒæ—¶å±è”½äº† 3ï¼Œ4ï¼Œ5 çš„ usb ç«¯å£ã€‚</li>
</ul>
<pre><code class="language-bash">vi drivers/usb/serial/option.c
######æ–‡ä»¶ä¿®æ”¹å†…å®¹å¦‚ä¸‹######
{ USB_DEVICE(0x305a, 0x1406)}, /* GOSUNCN */
######æ–‡ä»¶ä¿®æ”¹å†…å®¹ç»“æŸ######
</code></pre>
<ul>
<li>
<p>é—®é¢˜æ’æŸ¥ä¹‹ lsusb æ— æ³•è¯†åˆ«ã€‚</p>
<ol>
<li>ç¡®å®šæ¨¡å—æ˜¯å¦æ’å…¥ ã€‚</li>
<li>å¹³å° usb é©±åŠ¨æ˜¯å¦æ­£ç¡®åŠ è½½ ã€‚</li>
<li>æ¨¡å—æ˜¯å¦ä¸Šç”µï¼Œä¸€èˆ¬è®¾å¤‡æœ‰ GPIO å¼•è„šæ§åˆ¶æ¨¡å—ç”µæº ã€‚</li>
<li>æ¨¡å—æœ‰å¼‚å¸¸ï¼Œå¯èƒ½æ˜¯æ¨¡å—æ²¡æœ‰åœ¨æ­£ç¡®çš„å·¥ä½œæ¨¡å¼ã€‚</li>
</ol>
</li>
<li>
<p>ttyUSBx çš„æšä¸¾ã€‚<br>
ttyUSB æ¥å£åŒ…å«äº† at å£å’Œ modem å£ï¼Œat å£å‡ºæ¥åï¼Œæ‰èƒ½å®ç°æ‹¨å·è”ç½‘ã€‚ å¦‚æœ ls /dev/ttyUSB*æ²¡æœ‰æšä¸¾ï¼Œlsusb å¯ä»¥è¯†åˆ«åˆ°æ¨¡å— idï¼Œè¯´æ˜æ¨¡å—çš„ USB ä¸²å£é©±åŠ¨æœªæ­£ç¡®åŠ è½½ã€‚</p>
</li>
<li>
<p>æ§åˆ¶ 4G/5G æ¨¡å—ä¸Šä¸‹ç”µã€‚</p>
</li>
</ul>
<pre><code class="language-bash"># 1.GPIOæŸ¥çœ‹çš„èµ·å§‹å€¼
cat /sys/kernel/debug/gpio
# 2.GPIOæŸ¥çœ‹labelä¿¡æ¯
ll /sys/class/gpio
cat gpiochip446/label
cat gpiochip482/label
# 3.é€šè¿‡GPIOæ§åˆ¶æ¨¡å—ä¸Šä¸‹ç”µã€‚æ ¹æ®è½¯ç¡¬ä»¶æ¥å£æ–‡æ¡£ï¼Œ4Gæ¨¡å—çš„ç”µæºæ§åˆ¶å£çº¿æ˜¯GPIO2[0],gpioç¼–å·å°±æ˜¯482ï¼Œå‘åé¡ºå»¶GPIO2[1],gpioç¼–å·å°±æ˜¯483
echo 482 &gt; /sys/class/gpio/export
echo out &gt; /sys/class/gpio/gpio482/direction
echo 0 &gt; /sys/class/gpio/gpio482/value
</code></pre>
<ul>
<li>å¸¸ç”¨æ¨¡å—æ‹¨å·å‘½ä»¤ã€‚</li>
</ul>
<pre><code class="language-bash"># é«˜æ–°å…´ME3630-4G
eserial /dev/ttyUSB1 at+csq                                          # æŸ¥è¯¢ä¿¡å·å¼ºåº¦
eserial /dev/ttyUSB1 AT+ZECMCALL=1                        # æ‹¨å·
# å¹¿å’Œé€šNL668-4G
eserial /dev/ttyUSB1 at+csq                                          # æŸ¥è¯¢ä¿¡å·å¼ºåº¦
eserial /dev/ttyUSB1 at+gtusbmode=18
eserial /dev/ttyUSB1 at\$qcrmcall=1,1                         # æ‹¨å·
# å¹¿å’Œé€šL610-4G
eserial /dev/ttyUSB1 at+csq                                          # æŸ¥è¯¢ä¿¡å·å¼ºåº¦
eserial /dev/ttyUSB1 at+gtrndis=1,1                            # æ‹¨å·
# å¹¿å’Œé€šFM150-5G
eserial /dev/ttyUSB1 at+cesq                                        # æŸ¥è¯¢ä¿¡å·å¼ºåº¦
eserial /dev/ttyUSB1 at\$qcrmcall=1,1                         # æ‹¨å·
# å¹¿å’Œé€šFM650-5G
eserial /dev/ttyUSB1 at+cesq                                        # æŸ¥è¯¢ä¿¡å·å¼ºåº¦
eserial /dev/ttyUSB1 at+gtrndis=1,1,3                         # æ‹¨å·
# ç§»è¿œRM500U-5G
eserial /dev/ttyUSB1 at+csq                                          # æŸ¥è¯¢ä¿¡å·å¼ºåº¦
eserial /dev/ttyUSB1 at+qnetdevctl=1,1,1                   # æ‹¨å·
# æœ‰æ–¹N511-5G
eserial /dev/ttyUSB1 at+cesq                                        # æŸ¥è¯¢ä¿¡å·å¼ºåº¦
eserial /dev/ttyUSB1 AT+NWNETSHAREACT=1,1,0     # æ‹¨å·
</code></pre>
<h2 id="wifi-æ¨¡å—æµ‹è¯•">ğŸ‘‡ WIFI æ¨¡å—æµ‹è¯•</h2>
<ul>
<li>é€šè¿‡ lspci å‘½ä»¤ï¼ŒæŸ¥çœ‹æ¨¡å—çš„å‹å·å’Œ ID å€¼ã€‚</li>
</ul>
<pre><code class="language-bash">cat /proc/bus/pci/devices
</code></pre>
<ul>
<li>
<p>åˆ¤æ–­é©±åŠ¨æ˜¯å¦åŠ è½½ï¼Œ9287 æ¨¡å—éœ€åŠ è½½ ath9k é©±åŠ¨ï¼Œ9882 æ¨¡å—éœ€åŠ è½½ ath10 é©±åŠ¨ï¼ŒåŒæ—¶ç³»ç»Ÿ /lib/firmware/ath10k å›ºä»¶ç›®å½•å­˜åœ¨ï¼Œ6174 æ¨¡å—éœ€åŠ è½½ qca6174 é©±åŠ¨ï¼ŒåŒæ—¶ç³»ç»Ÿ /lib/firmware/qca6174/ å›ºä»¶ç›®å½•å­˜åœ¨ï¼Œlsmod å‘½ä»¤æŸ¥çœ‹é©±åŠ¨æ¨¡å—æ˜¯å¦åŠ è½½ï¼Œcat /proc/bus/pci/devices ä¹Ÿå¯ä»¥çœ‹åˆ°æ¨¡å—ç›®å‰å·²ç»åŠ è½½çš„é©±åŠ¨ã€‚</p>
</li>
<li>
<p>ç”¨æˆ·æ€é…ç½®å·¥å…·ï¼Œåœ¨ linux ç³»ç»Ÿä¸‹ï¼Œéœ€è¦ä¸‹é¢ä¸‰ä¸ªç”¨æˆ·æ€å·¥å…·é…ç½® wifiã€‚<br>
1.iw å‘½ä»¤ï¼Œç”¨äºåˆ›å»ºåˆ é™¤æ— çº¿æ¥å£ã€‚<br>
2. å½“ ap æ¨¡å¼åˆ›å»ºæ— çº¿çƒ­ç‚¹æ—¶ï¼Œéœ€è¦ hostapd å·¥å…·ï¼Œç‰ˆæœ¬ä¸è¦ä½äº 2.7ã€‚<br>
3. å½“ sta æ¨¡å¼æ—¶ï¼Œéœ€è¦ wpa_supplicant å·¥å…·ã€‚</p>
</li>
<li>
<p>Openwrt ç³»ç»Ÿä¸‹é…ç½® wifiã€‚</p>
</li>
</ul>
<pre><code class="language-bash">uci show wireless                                                               #å¯ä»¥ä»/etc/config/wirelessè¯»å‡ºé…ç½®
wifi config                                                                          #ç”Ÿæˆé»˜è®¤çš„wifié…ç½®æ–‡ä»¶ï¼ŒopenwrtåŠ è½½wifié©±åŠ¨åï¼Œå¦‚æœ/etc/config/wirelessæ–‡ä»¶ä¸å­˜åœ¨ï¼Œä¼šè‡ªåŠ¨åˆç”Ÿæˆwifié…ç½®æ–‡ä»¶
uci set                                                                                 #è®¾ç½®openwrtçš„æ— çº¿å‚æ•°
uci set wireless.default_radio0.ssid='ath10k-6174-0'    #è¿è¡Œwifiå‘½ä»¤ï¼Œç”Ÿæ•ˆè®¾ç½®çš„æ— çº¿å‚æ•°
wifi down                                                                           #ç¦ç”¨æ— çº¿
</code></pre>
<pre><code class="language-bash">vi /etc/config/wireless
######æ–‡ä»¶ä¿®æ”¹å†…å®¹å¦‚ä¸‹######
config wifi-iface 'default_radio0'
option device 'radio0'
option network 'wlan0'
option mode 'sta'
option encryption 'psk2'
option ssid 'wifiåå­—'
option key 'wifiå¯†ç '
######æ–‡ä»¶ä¿®æ”¹å†…å®¹ç»“æŸ######
</code></pre>
<ul>
<li>hostapd æ˜¯ä¸€ä¸ªç”¨æˆ·æ€ç”¨äº AP å’Œè®¤è¯æœåŠ¡å™¨çš„å®ˆæŠ¤è¿›ç¨‹ã€‚å®ƒå®ç°äº† IEEE 802.11 ç›¸å…³çš„æ¥å…¥ç®¡ç†ï¼Œæ”¯æŒ IEEE 802.1X/WPA/WPA2/EAP è®¤è¯ï¼ŒRADIUS å®¢æˆ·ç«¯ï¼ŒEAP æœåŠ¡å™¨å’Œ RADIUS è®¤è¯æœåŠ¡å™¨ã€‚ hostapd é€šè¿‡é…ç½®æ–‡ä»¶è¯»å–é…ç½®å‚æ•°ã€‚</li>
</ul>
<pre><code class="language-bash">vi /etc/hostapd/hostapd.conf
######æ–‡ä»¶ä¿®æ”¹å†…å®¹å¦‚ä¸‹######
driver=nl80211
logger_syslog=127
logger_syslog_level=2
logger_stdout=127
logger_stdout_level=2
country_code=CN
ieee80211d=1
ieee80211h=1
hw_mode=a
beacon_int=100
channel=36
tx_queue_data2_burst=2.0
ieee80211n=1
ht_coex=0
ht_capab=[HT40+][SHORT-GI-20][SHORT-GI-40][TX-STBC][DSSS_CCK-40]
vht_oper_chwidth=1
vht_oper_centr_freq_seg0_idx=42
ieee80211ac=1
vht_capab=[RXLDPC][SHORT-GI-80][TX-STBC-2BY1][RX-STBC-123][MAX-MPDU-11454][MAX-A-MPDU-LEN-EXP0]
interface=wlan1
ctrl_interface=/var/run/hostapd
ap_isolate=1
use_driver_iface_addr=1
disassoc_low_ack=1
preamble=1
wmm_enabled=1
ignore_broadcast_ssid=0
uapsd_advertisement_enabled=1
wpa_passphrase=csxl83050783
auth_algs=1
wpa=2
wpa_pairwise=CCMP
ssid=qca6174-5g
bridge=br-lan
wpa_disable_eapol_key_retries=0
wpa_key_mgmt=WPA-PSK
okc=0
disable_pmksa_caching=1
######æ–‡ä»¶ä¿®æ”¹å†…å®¹ç»“æŸ######
</code></pre>
<ul>
<li>wpa_supplicant ç”¨äºè¿æ¥æ— çº¿çƒ­ç‚¹ï¼Œæ”¯æŒæ”¯æŒ IEEE 802.1X/WPA/WPA2 è®¤è¯ã€‚ wpa_supplicant é€šè¿‡é…ç½®è¯»å– wifi å‚æ•°ã€‚</li>
</ul>
<pre><code class="language-bash">wpa_supplicant.conf
######æ–‡ä»¶ä¿®æ”¹å†…å®¹å¦‚ä¸‹######
network={
  scan_ssid=1                    #æ‰«æä¿¡å·æ˜¯å¦å­˜åœ¨
  ssid=&quot;ath10k-6174-1&quot;    #è¦è¿æ¥çš„çƒ­ç‚¹åç§°
  key_mgmt=WPA-PSK     #å…±äº«ç§˜é’¥è®¤è¯
  psk=&quot;12345678&quot;             #å¯†ç 
  proto=RSN                     #wpa2åŠ å¯†åè®®
  beacon_int=100             #æ£€æµ‹ä¿¡æ ‡é—´éš”
}
######æ–‡ä»¶ä¿®æ”¹å†…å®¹ç»“æŸ######
</code></pre>
<pre><code class="language-bash">æ­¥éª¤1ï¼šip addr
æ­¥éª¤2ï¼šip link set wlp0s0 upï¼ˆwlp0s0æ˜¯æˆ‘çš„ç½‘å¡ï¼‰
æ­¥éª¤3ï¼šwpa_supplicant -B -i wlp0s0 -c &lt;(wpa_passphrase â€œWIFIåç§°â€ â€œå¯†ç â€)
æ­¥éª¤4ï¼šdhclient wlp0s0
æ­¥éª¤5ï¼šping ç½‘å€ï¼ˆæµ‹è¯•ï¼‰
</code></pre>
<h2 id="thank-you-for-browsingenjoy~">ğŸ˜˜ Thank you for browsingï¼ŒEnjoy~</h2>
]]></content>
    </entry>
    <entry>
        <title type="html"><![CDATA[OpenWrt ç¼–è¯‘å›ºä»¶]]></title>
        <id>https://dustmm.github.io/post/openwrt/</id>
        <link href="https://dustmm.github.io/post/openwrt/">
        </link>
        <updated>2024-07-31T08:01:25.000Z</updated>
        <content type="html"><![CDATA[<p>ğŸ‘ æ¬¢è¿ä½¿ç”¨<strong>OpenWrt</strong>ï¼Œ<a href="https://openwrt.org/">OpenWrt</a> æ˜¯ä¸€ä¸ªé«˜åº¦å¯å®šåˆ¶åŒ–çš„å¼€æºé¡¹ç›®ï¼Œå®ƒä¸ºåµŒå…¥å¼è®¾å¤‡æä¾›äº†ä¸€å¥—å¼ºå¤§çš„æ“ä½œç³»ç»Ÿã€‚æœ¬æ•™ç¨‹å°†æŒ‡å¯¼ä½ å¦‚ä½•åœ¨è‡ªå·±çš„ç³»ç»Ÿä¸Šç¼–è¯‘ OpenWrtï¼Œè®©ä½ èƒ½å¤Ÿä¸ºä½ çš„è·¯ç”±å™¨æˆ–å…¶ä»–åµŒå…¥å¼è®¾å¤‡åˆ›å»ºä¸€ä¸ªå®šåˆ¶çš„å›ºä»¶ï¼</p>
<h2 id="å‰æœŸå‡†å¤‡å·¥ä½œ">ğŸ‘‡ å‰æœŸå‡†å¤‡å·¥ä½œ</h2>
<p>åœ¨å¼€å§‹ç¼–è¯‘ OpenWrt ä¹‹å‰ï¼Œè¯·ç¡®ä¿ä½ çš„ç³»ç»Ÿæ»¡è¶³ä»¥ä¸‹è¦æ±‚ï¼š</p>
<ul>
<li>æ“ä½œç³»ç»Ÿï¼šLinuxã€BSD æˆ– macOSï¼ˆWindows ç”¨æˆ·å¯ä»¥é€šè¿‡ WSL2 ä½¿ç”¨ Linux ç¯å¢ƒï¼‰</li>
<li>å¤„ç†å™¨ï¼šè‡³å°‘ 2 GHz åŒæ ¸å¤„ç†å™¨ã€‚</li>
<li>å†…å­˜ï¼šè‡³å°‘ 4 GB RAM</li>
<li>ç¡¬ç›˜ç©ºé—´ï¼šè‡³å°‘ 10 GB å¯ç”¨ç©ºé—´ã€‚</li>
<li>ä¾èµ–è½¯ä»¶ï¼š<code>git</code>, <code>gcc</code>, <code>binutils</code>, <code>bzip2</code>, <code>flex</code>, <code>python</code>, <code>perl</code>, <code>make</code>, <code>findutils</code>, <code>grep</code>, <code>sed</code>, <code>awk</code>, <code>diff</code>, <code>patch</code>ç­‰ã€‚</li>
</ul>
<p>å¯¹äº Ubuntu/Debian ç³»ç»Ÿï¼Œå¯ä»¥é€šè¿‡ä»¥ä¸‹å‘½ä»¤å®‰è£…æ‰€éœ€çš„ä¾èµ–ã€‚å¯¹äºå…¶ä»–ç³»ç»Ÿï¼Œè¯·æ ¹æ®ä½ çš„å‘è¡Œç‰ˆå®‰è£…ç›¸åº”çš„è½¯ä»¶åŒ…ã€‚</p>
<pre><code class="language-bash">sudo apt update -y
sudo apt full-upgrade -y
sudo apt install -y ack antlr3 asciidoc autoconf automake autopoint binutils bison build-essential \
bzip2 ccache cmake cpio curl device-tree-compiler fastjar flex gawk gettext gcc-multilib g++-multilib \
git gperf haveged help2man intltool libc6-dev-i386 libelf-dev libfuse-dev libglib2.0-dev libgmp3-dev \
libltdl-dev libmpc-dev libmpfr-dev libncurses5-dev libncursesw5-dev libpython3-dev libreadline-dev \
libssl-dev libtool lrzsz mkisofs msmtp ninja-build p7zip p7zip-full patch pkgconf python2.7 python3 \
python3-pyelftools python3-setuptools qemu-utils rsync scons squashfs-tools subversion swig texinfo \
uglifyjs upx-ucl unzip vim wget xmlto xxd zlib1g-dev
</code></pre>
<p><strong>æ³¨æ„åƒä¸‡ä¸è¦ä½¿ç”¨ root ç”¨æˆ·è¿›è¡Œç¼–è¯‘æ“ä½œã€‚</strong></p>
<h2 id="ä¸‹è½½ä»“åº“æºç ">ğŸ‘‡ ä¸‹è½½ä»“åº“æºç </h2>
<ul>
<li>ç”±äºæˆ‘ä½¿ç”¨å¹¶éå®˜æ–¹ OpenWrtï¼Œæœ¬æ–‡ä¸å¯¹ä¸‹è½½æºç è¿›è¡Œè¿‡å¤šæè¿°ï¼Œæ­¤éƒ¨åˆ†å†…å®¹ä»…ä¾›å‚è€ƒã€‚</li>
</ul>
<pre><code class="language-bash">git clone https://github.com/coolsnowwolf/lede
cd lede
./scripts/feeds update -a
./scripts/feeds install -a
make menuconfig
</code></pre>
<h2 id="è‡ªå®šä¹‰åº”ç”¨">ğŸ‘‡ è‡ªå®šä¹‰åº”ç”¨</h2>
<ul>
<li>åˆ†äº«ä¸€äº›ä¸ªäººæ·»åŠ çš„å¸¸ç”¨åº”ç”¨ã€‚å¦‚ diffã€i2c-toolsã€pciutilsã€usbutilsã€libstdcppã€janssonï¼ˆç‰ˆæœ¬éœ€è¦ 2.13.1)ã€libaioã€libeventã€mountã€wgetã€fioã€lsblkã€lscpuã€auto-factoryã€lsscsiã€tasksetã€ntpdateã€æ— çº¿ç”¨ hostapd-utilsã€wireless-toolsã€wpa-supplicant ç­‰ã€‚</li>
</ul>
<pre><code class="language-bash">#make menuconfig
wget
i2c-tools
#make kernel_menuconfig
CONFIG_XSPEED_CONFIG_LOCK        # ç¡¬ä»¶é”eeprom/spié©±åŠ¨
GPIO_SYSFS                                         # gpioé©±åŠ¨
LEDS_BRIGHTNESS_HW_CHANGED   # LEDé©±åŠ¨
LEDS_TRIGGER_DEFAULT_ON             # LEDé©±åŠ¨å®šæ—¶å™¨è§¦å‘æ”¯æŒ
USB_SERIAL_OPTION                          # USBä¸²å£é©±åŠ¨
RTC_DRV_PCF8563                              # RTCé©±åŠ¨
WATCHDOG                                         # çœ‹é—¨ç‹—
CONFIG_USB_NET_CDCETHER           # USBç½‘å¡é©±åŠ¨
</code></pre>
<ul>
<li>ä»‹ç»ä¸€äº›å¸‚é¢ä¸Šæ¯”è¾ƒå¸¸è§ä½¿ç”¨çš„æ’ä»¶ï¼ŒæŒ‰éœ€è‡ªè¡Œæ·»åŠ ã€‚</li>
</ul>
<pre><code class="language-bash">luci-app-firewall                             # é˜²ç«å¢™å’Œç«¯å£è½¬å‘,å¿…å¤‡
luci-app-adbyby-plus                    # å¹¿å‘Šå±è”½å¤§å¸ˆ Plus+
luci-app-sfe                                    # Turbo ACC ç½‘ç»œåŠ é€Ÿ(å¼€å¯ Fast Path è½¬å‘åŠ é€Ÿ)
luci-app-unblockNeteaseMusic    # è§£é”ç½‘æ˜“äº‘
luci-app-wol                                   # ç½‘ç»œå”¤é†’
luci-app-accesscontrol                  # ä¸Šç½‘æ—¶é—´æ§åˆ¶
luci-app-arpbind                            # IP/MAC ç»‘å®š
luci-app-autoreboot                      # è®¡åˆ’é‡å¯
luci-app-ddns                                 # åŠ¨æ€åŸŸåè§£æ
luci-app-filetransfer                       # ä¸Šä¼  ipk æ–‡ä»¶åŠŸèƒ½
luci-app-frpc                                   # å†…ç½‘ç©¿é€ Frp
luci-app-ipsec-vpnd                       # IPSec æœåŠ¡ç«¯
luci-app-nlbwmon                          # ç½‘ç»œå¸¦å®½ç›‘è§†å™¨
luci-app-ramfree                            # é‡Šæ”¾å†…å­˜
luci-app-rclone                               # rclone
luci-app-samba                              # ç½‘ç»œå…±äº«ï¼ˆsambaï¼‰
luci-app-upnp                                # é€šç”¨å³æ’å³ç”¨ UPnP(ç«¯å£è‡ªåŠ¨è½¬å‘)
luci-app-vlmcsd                             # KMS æœåŠ¡å™¨ï¼ˆWIN æ¿€æ´»å·¥å…·ï¼‰
luci-app-vsftpd                              # FTP æœåŠ¡å™¨
luci-app-webadmin                       # Web ç®¡ç†é¡µé¢è®¾ç½®
luci-app-xlnetacc                           # è¿…é›·ä¸‹è½½
luci-app-zerotier                            # è™šæ‹Ÿå±€åŸŸç½‘
luci-app-aria2                                # Aria2 ä¸‹è½½
luci-app-hd-idle                            # ç¡¬ç›˜ä¼‘çœ 
luci-app-mwan3                            # MWAN è´Ÿè½½å‡è¡¡
luci-app-openvpn                         # OpenVPN å®¢æˆ·ç«¯
luci-app-openvpn-server              # OpenVPN æœåŠ¡ç«¯
luci-app-pptp-server                    # PPTP æœåŠ¡ç«¯
luci-app-sqm                                 # æµé‡æ™ºèƒ½é˜Ÿåˆ—ç®¡ç†(QOS)
luci-app-transmission                   # BT ä¸‹è½½
luci-app-usb-printer                     # USB æ‰“å°æœåŠ¡å™¨
luci-app-wireguard                       # VPN æœåŠ¡å™¨ WireGuard çŠ¶æ€
luci-app-wrtbwmon                      # å®æ—¶æµé‡ç›‘æµ‹
</code></pre>
<h2 id="è®¾å¤‡æ ‘éƒ¨åˆ†">ğŸ‘‡ è®¾å¤‡æ ‘éƒ¨åˆ†</h2>
<ul>
<li>ç³»ç»Ÿå¯åŠ¨éœ€è¦å†…æ ¸é•œåƒå’Œè®¾å¤‡æ ‘æ–‡ä»¶ï¼Œå³ dtb æ–‡ä»¶ã€‚è®¾å¤‡æ ‘æ–‡ä»¶åœ¨å†…æ ¸ä¸­çš„ arch/arm64/boot/dts/ å¯¹åº”å¹³å°è·¯å¾„ä¸‹ã€‚å®¢æˆ·å¯ä»¥é€šè¿‡ dts æ–‡ä»¶ï¼Œä¿®æ”¹ sysfs-led çš„æ§åˆ¶ï¼Œgpio-keys æ§åˆ¶ï¼Œä»¥å¤ªç½‘å’Œäº¤æ¢èŠ¯ç‰‡ DSA ç­‰é…ç½®ã€‚</li>
</ul>
<pre><code class="language-bash">arch/arm64/boot/dts/marvell/armada-3720-nmxx.dts                                    # Armadaå¹³å°
arch/arm64/boot/dts/rockchip/rk3566-xspeed-ra01-v010-linux_cfg1.dts     # RKå¹³å°
</code></pre>
<ul>
<li>è®¾å¤‡æ ‘å…³äºç¯çš„é…ç½®ã€‚</li>
</ul>
<pre><code class="language-bash">gpio-leds {
	compatible = &quot;gpio-leds&quot;;
	led-1 {
    		label = &quot;DB1&quot;;
			linux,default-trigger = &quot;timer&quot;;
			gpios = &lt;&amp;gpio1 RK_PA6 GPIO_ACTIVE_LOW&gt;;
			default-state = &quot;on&quot;;
		};
};
</code></pre>
<h2 id="å›ºä»¶å®šåˆ¶åŒ–éƒ¨åˆ†">ğŸ‘‡ å›ºä»¶å®šåˆ¶åŒ–éƒ¨åˆ†</h2>
<ul>
<li>ä¿®æ”¹ boot æ–‡ä»¶ï¼Œä½¿å…¶å¼€æœºè¿è¡Œè‡ªå®šä¹‰è„šæœ¬ã€‚</li>
</ul>
<pre><code class="language-bash">vi package/base-files/files/etc/init.d/boot
######æ–‡ä»¶ä¿®æ”¹å†…å®¹å¦‚ä¸‹######
#!/bin/sh /etc/rc.common
# Copyright (C) 2006-2011 OpenWrt.org

START=10
STOP=98

uci_apply_defaults() {
        . /lib/functions/system.sh

        cd /etc/uci-defaults || return 0
        files=&quot;$(ls)&quot;
        [ -z &quot;$files&quot; ] &amp;&amp; return 0
        mkdir -p /tmp/.uci
        for file in $files; do
                ( . &quot;./$(basename $file)&quot; ) &amp;&amp; rm -f &quot;$file&quot;
        done
        uci commit
}

update_ate_files() {
        blkdev=$(cat /proc/cmdline |awk -F 'rootdev=' '{print$2}'|awk '{print $1}')
        if [ &quot;${blkdev}&quot; = &quot;&quot; ]
        then
                blkdev=&quot;/dev/sda1&quot;
                echo &quot;rootdev is null,set it is ${blkdev} !&quot;
        else
                echo &quot;The rootdev is ${blkdev} !&quot;
        fi

        if [ -b &quot;$blkdev&quot; ];then
                mount &quot;$blkdev&quot; /mnt
                /mnt/ate/ateinit.sh
                umount /mnt
        fi
}

boot() {
        [ -f /proc/mounts ] || /sbin/mount_root
        [ -f /proc/jffs2_bbc ] &amp;&amp; echo &quot;S&quot; &gt; /proc/jffs2_bbc
        [ -f /proc/net/vlan/config ] &amp;&amp; vconfig set_name_type DEV_PLUS_VID_NO_PAD

        mkdir -p /var/run
        mkdir -p /var/log
        mkdir -p /var/lock
        mkdir -p /var/state
        mkdir -p /var/tmp
        mkdir -p /tmp/.uci
        chmod 0700 /tmp/.uci
        touch /var/log/wtmp
        touch /var/log/lastlog
        touch /tmp/resolv.conf.auto
        ln -sf /tmp/resolv.conf.auto /tmp/resolv.conf
        grep -q debugfs /proc/filesystems &amp;&amp; /bin/mount -o noatime -t debugfs debugfs /sys/kernel/debug
        [ &quot;$FAILSAFE&quot; = &quot;true&quot; ] &amp;&amp; touch /tmp/.failsafe

        #update auto factory test files
        update_ate_files

        /sbin/kmodloader

        [ ! -f /etc/config/wireless ] &amp;&amp; {
                # compat for brcm47xx and mvebu
                sleep 1
        }

        /bin/config_generate
        uci_apply_defaults

        # temporary hack until configd exists
        /sbin/reload_config
}
######æ–‡ä»¶ä¿®æ”¹å†…å®¹ç»“æŸ######
</code></pre>
<ul>
<li>ä¿®æ”¹ login.sh ä½¿å…¶ä¸²å£ç™»å½•éœ€è¦å¯†ç ã€‚</li>
</ul>
<pre><code class="language-bash">vi package/base-files/files/usr/libexec/login.sh
######æ–‡ä»¶ä¿®æ”¹å†…å®¹å¦‚ä¸‹######
#!/bin/sh

[ &quot;$(uci -q get system.@system[0].ttylogin)&quot; == 1 ] || exec /bin/login

exec /bin/login
######æ–‡ä»¶ä¿®æ”¹å†…å®¹ç»“æŸ######
</code></pre>
<ul>
<li>ä¿®æ”¹ shadow æ–‡ä»¶ï¼Œå®ç° root ç”¨æˆ·æ‹¥æœ‰å¯†ç å¯†ç ã€‚</li>
</ul>
<pre><code class="language-bash">vi package/base-files/files/etc/shadow
######æ–‡ä»¶ä¿®æ”¹å†…å®¹å¦‚ä¸‹######
root:$1$7aqew7Sj$fsoq.EmzVZK8r7oLAJQrc0:18738:0:99999:7:::
daemon:*:0:0:99999:7:::
ftp:*:0:0:99999:7:::
network:*:0:0:99999:7:::
nobody:*:0:0:99999:7:::
######æ–‡ä»¶ä¿®æ”¹å†…å®¹ç»“æŸ######
</code></pre>
<ul>
<li>è®¾ç½®é»˜è®¤çš„ network é…ç½®ã€‚</li>
</ul>
<pre><code class="language-bash">vi package/base-files/files/etc/config/network
######æ–‡ä»¶ä¿®æ”¹å†…å®¹å¦‚ä¸‹######
config interface 'loopback'
        option ifname 'lo'
        option proto 'static'
        option ipaddr '127.0.0.1'
        option netmask '255.0.0.0'

config globals 'globals'
        option ula_prefix 'fd28:36e7:8f84::/48'

config interface 'wan'
        option ifname 'MGMT'
        option proto 'dhcp'

config interface 'lte'
        option ifname 'usb0'
        option metric '2'
        option proto 'dhcp'
        option disabled '1'

config interface 'wwan'
        option metric '2'
        option proto 'dhcp'

config interface 'ppp'
        option proto '3g'
        option device '/dev/ttyUSB0'
        option service 'umts'
        option pppname 'ppp'
        option metric '2'
        option disabled '1'
######æ–‡ä»¶ä¿®æ”¹å†…å®¹ç»“æŸ######
</code></pre>
<ul>
<li>è®¾å¤‡ hostname çš„ä¿®æ”¹æ“ä½œï¼Œå°† OpenWrt æ›¿æ¢ä¸ºæˆä½ éœ€è¦çš„åç§°ã€‚æˆ–è€…ç›´æ¥ä¿®æ”¹è®¾å¤‡çš„ /etc/config/system æ–‡ä»¶ã€‚</li>
</ul>
<pre><code class="language-bash">vi package/base-files/files/bin/config_generate
######æ–‡ä»¶ä¿®æ”¹å†…å®¹å¦‚ä¸‹######
                delete system.@system[0]
                add system system
                set system.@system[-1].hostname='OpenWrt'
                set system.@system[-1].timezone='UTC'
                set system.@system[-1].ttylogin='0'
                set system.@system[-1].log_size='64'
                set system.@system[-1].urandom_seed='0'
######æ–‡ä»¶ä¿®æ”¹å†…å®¹ç»“æŸ######
</code></pre>
<ul>
<li>ä¿®æ”¹è®¾å¤‡é»˜è®¤çš„ ssid åå­—ã€‚</li>
</ul>
<pre><code class="language-bash">vi package/kernel/mac80211/files/lib/wifi/mac80211.sh
######æ–‡ä»¶ä¿®æ”¹å†…å®¹å¦‚ä¸‹######
set wireless.default_${name}.ssid=OpenWrt		 	# wifiåç§°
set wireless.default_${name}.encryption=psk2		# wifiåŠ å¯†æ–¹å¼ï¼Œæ²¡æœ‰æ˜¯none
set wireless.default_radio${devidx}.key=12345678	# wifiå¯†ç 
######æ–‡ä»¶ä¿®æ”¹å†…å®¹ç»“æŸ######
</code></pre>
<ul>
<li>è®¾å¤‡ç»ˆç«¯çš„ banner ä¿®æ”¹ï¼Œå¯ä»¥ä½¿ç”¨ figlet å·¥å…·ç”Ÿæˆç©ºå¿ƒå­—ã€‚</li>
</ul>
<pre><code class="language-bash">figlet -f big HuangYanJie
vi package/base-files/files/etc/banner
######æ–‡ä»¶ä¿®æ”¹å†…å®¹å¦‚ä¸‹######
 _    _                      __     __              _ _
| |  | |                     \ \   / /             | (_)
| |__| |_   _  __ _ _ __   __ \ \_/ /_ _ _ __      | |_  ___
|  __  | | | |/ _` | '_ \ / _` \   / _` | '_ \ _   | | |/ _ \
| |  | | |_| | (_| | | | | (_| || | (_| | | | | |__| | |  __/
|_|  |_|\__,_|\__,_|_| |_|\__, ||_|\__,_|_| |_|\____/|_|\___|
                           __/ |
                          |___/
######æ–‡ä»¶ä¿®æ”¹å†…å®¹ç»“æŸ######
</code></pre>
<ul>
<li>ä¿®æ”¹é»˜è®¤ IPï¼Œé»˜è®¤ ip æ˜¯ 192.168.1.1ï¼Œæˆ‘ä»¬ä¹Ÿå¯ä»¥è®¾ç½®æˆæˆ‘ä»¬ç‰¹æ®Šéœ€è¦çš„ IP</li>
</ul>
<pre><code class="language-bash">vi package/base-files/files/bin/config_generate
######æ–‡ä»¶ä¿®æ”¹å†…å®¹å¦‚ä¸‹######
static)
        local ipad
        case &quot;$1&quot; in
                lan) ipad=${ipaddr:-&quot;192.168.1.1&quot;} ;;
                *) ipad=${ipaddr:-&quot;192.168.$((addr_offset++)).1&quot;} ;;
        esac
######æ–‡ä»¶ä¿®æ”¹å†…å®¹ç»“æŸ######
</code></pre>
<ul>
<li>å…³äºå¢åŠ luciçš„æ“ä½œå¯ä»¥å‚è€ƒ<a href="https://mp.weixin.qq.com/s/p8ov1ZipJaEDkQVcCDxrVQ">é“¾æ¥</a>ã€‚</li>
</ul>
<h2 id="thank-you-for-browsingenjoy~">ğŸ˜˜ Thank you for browsingï¼ŒEnjoy~</h2>
]]></content>
    </entry>
    <entry>
        <title type="html"><![CDATA[Linux ä¸ªäººå¸¸ç”¨å‘½ä»¤]]></title>
        <id>https://dustmm.github.io/post/linux/</id>
        <link href="https://dustmm.github.io/post/linux/">
        </link>
        <updated>2024-07-30T06:41:20.000Z</updated>
        <content type="html"><![CDATA[<p>ğŸ‘ æ¬¢è¿ä½¿ç”¨<strong>Linux</strong>ï¼Œæœ¬æ–‡ä¸»è¦è®°å½•ä¸ªäºº Linux ä½¿ç”¨è¿‡ç¨‹ä¸­ä¸€äº›å¸¸è§å¸¸ç”¨çš„å‘½ä»¤ï¼</p>
<h1 id="ç³»ç»Ÿç›¸å…³å‘½ä»¤æ“ä½œ">ğŸ‘‰ç³»ç»Ÿç›¸å…³å‘½ä»¤æ“ä½œğŸ‘ˆ</h1>
<h2 id="æŸ¥çœ‹ç³»ç»Ÿæ—¥å¿—">ğŸ‘‡ æŸ¥çœ‹ç³»ç»Ÿæ—¥å¿—</h2>
<pre><code class="language-bash">dmesg
</code></pre>
<h2 id="æŸ¥çœ‹ç³»ç»Ÿå†…æ ¸ä¿¡æ¯">ğŸ‘‡ æŸ¥çœ‹ç³»ç»Ÿå†…æ ¸ä¿¡æ¯</h2>
<pre><code class="language-bash">uname -a
</code></pre>
<h2 id="æŸ¥çœ‹ç³»ç»Ÿå†…æ ¸ç‰ˆæœ¬">ğŸ‘‡ æŸ¥çœ‹ç³»ç»Ÿå†…æ ¸ç‰ˆæœ¬</h2>
<pre><code class="language-bash">cat /proc/version
</code></pre>
<h2 id="æŸ¥çœ‹å½“å‰ç”¨æˆ·ç¯å¢ƒå˜é‡">ğŸ‘‡ æŸ¥çœ‹å½“å‰ç”¨æˆ·ç¯å¢ƒå˜é‡</h2>
<pre><code class="language-bash">env
</code></pre>
<h2 id="æŸ¥çœ‹ç³»ç»Ÿ-cpu-ä¿¡æ¯">ğŸ‘‡ æŸ¥çœ‹ç³»ç»Ÿ CPU ä¿¡æ¯</h2>
<ul>
<li>æŸ¥çœ‹æœ‰å‡ ä¸ªé€»è¾‘ cpuï¼ŒåŒ…æ‹¬ cpu å‹å·ã€‚</li>
</ul>
<pre><code class="language-bash">cat /proc/cpuinfo | grep name | cut -f2 -d: | uniq -c
</code></pre>
<ul>
<li>æŸ¥çœ‹æœ‰å‡ é¢— cpuï¼Œæ¯é¢—åˆ†åˆ«æ˜¯å‡ æ ¸ã€‚</li>
</ul>
<pre><code class="language-bash">cat /proc/cpuinfo | grep physical | uniq -c
</code></pre>
<ul>
<li>æŸ¥çœ‹å½“å‰ CPU è¿è¡Œåœ¨ 32bit è¿˜æ˜¯ 64bit æ¨¡å¼ä¸‹ï¼Œå¦‚æœæ˜¯è¿è¡Œåœ¨ 32bit ä¸‹ä¹Ÿä¸ä»£è¡¨ CPU ä¸æ”¯æŒ 64bit</li>
</ul>
<pre><code class="language-bash">getconf LONG_BIT
</code></pre>
<ul>
<li>ç»“æœå¤§äº 0ï¼Œè¯´æ˜æ”¯æŒ 64bit è®¡ç®—ã€‚lm æŒ‡ long modeï¼Œæ”¯æŒ lm åˆ™æ˜¯ 64bit</li>
</ul>
<pre><code class="language-bash">cat /proc/cpuinfo | grep flags | grep ' lm ' | wc -l
</code></pre>
<h2 id="ssh-å…¬é’¥ç›¸å…³">ğŸ‘‡ SSH å…¬é’¥ç›¸å…³</h2>
<ul>
<li>åˆ›å»ºå…¬é’¥ç§é’¥ï¼Œè¿‡ç¨‹ä¸­æŒ‰ä¸‰æ¬¡å›è½¦ï¼Œè¿›å…¥ /root/.ssh/ æ–‡ä»¶å¤¹ï¼Œå…¶ä¸­ id_rsa ä¸ºç§é’¥ id_rsa.pub ä¸ºå…¬é’¥ã€‚</li>
</ul>
<pre><code class="language-bash">ssh-keygen -t rsa
</code></pre>
<ul>
<li>åˆ é™¤å…¬é’¥ã€‚</li>
</ul>
<pre><code class="language-bash">ssh-keygen -R 192.168.100.140
</code></pre>
<ul>
<li>SSH æœåŠ¡é‡å¯ã€‚</li>
</ul>
<pre><code class="language-bash">sudo /etc/init.d/ssh restart
</code></pre>
<h2 id="å‘½ä»¤é‡å‘½å">ğŸ‘‡ å‘½ä»¤é‡å‘½å</h2>
<pre><code class="language-bash">alias ll='ls -alF'
</code></pre>
<h2 id="æŸ¥çœ‹å‘½ä»¤è·¯å¾„">ğŸ‘‡ æŸ¥çœ‹å‘½ä»¤è·¯å¾„</h2>
<pre><code class="language-bash">which ls    # which &lt;å‘½ä»¤&gt;
</code></pre>
<h2 id="åå°è¿è¡Œå‘½ä»¤">ğŸ‘‡ åå°è¿è¡Œå‘½ä»¤</h2>
<ul>
<li>åå°è¿è¡Œï¼Œå¹¶ä¸”æœ‰ nohup.out è¾“å‡ºã€‚</li>
</ul>
<pre><code class="language-bash">nohup xxx &amp;
</code></pre>
<ul>
<li>åå°è¿è¡Œï¼Œä¸è¾“å‡ºä»»ä½•æ—¥å¿—ã€‚</li>
</ul>
<pre><code class="language-bash">nohup xxx &gt; /dev/null &amp;
</code></pre>
<ul>
<li>åå°è¿è¡Œï¼Œå¹¶å°†é”™è¯¯ä¿¡æ¯åšæ ‡å‡†è¾“å‡ºåˆ°æ—¥å¿—ä¸­ã€‚</li>
</ul>
<pre><code class="language-bash">nohup xxx &gt;out.log 2&gt;&amp;1 &amp;
</code></pre>
<h2 id="åå°è¿›ç¨‹ç›¸å…³">ğŸ‘‡ åå°è¿›ç¨‹ç›¸å…³</h2>
<ul>
<li>æŸ¥çœ‹è¿›ç¨‹æ ‘æ‰¾åˆ°æœåŠ¡å™¨è¿›ç¨‹ã€‚</li>
</ul>
<pre><code class="language-bash">ps auwxf
</code></pre>
<ul>
<li>å¼ºåˆ¶å…³é—­è¿›ç¨‹ååŒ…å« xxx çš„æ‰€æœ‰è¿›ç¨‹ã€‚</li>
</ul>
<pre><code class="language-bash">ps aux|grep xxx | grep -v grep | awk '{print $2}' | xargs kill -9
</code></pre>
<h1 id="ç£ç›˜æ–‡ä»¶ç›®å½•ç›¸å…³æ“ä½œ">ğŸ‘‰ç£ç›˜ï¼Œæ–‡ä»¶ï¼Œç›®å½•ç›¸å…³æ“ä½œğŸ‘ˆ</h1>
<h2 id="æŸ¥çœ‹ç£ç›˜ä¿¡æ¯">ğŸ‘‡ æŸ¥çœ‹ç£ç›˜ä¿¡æ¯</h2>
<ul>
<li>æŸ¥çœ‹ç£ç›˜æŒ‚è½½æƒ…å†µã€‚</li>
</ul>
<pre><code class="language-bash">mount
</code></pre>
<ul>
<li>æŸ¥çœ‹ç£ç›˜åˆ†åŒºä¿¡æ¯ã€‚</li>
</ul>
<pre><code class="language-bash">df
</code></pre>
<ul>
<li>æŸ¥çœ‹ç›®å½•åŠå­ç›®å½•å¤§å°ã€‚</li>
</ul>
<pre><code class="language-bash">du -H -h
</code></pre>
<ul>
<li>æŸ¥çœ‹å½“å‰ç›®å½•ä¸‹å„ä¸ªæ–‡ä»¶ï¼Œæ–‡ä»¶å¤¹å äº†å¤šå°‘ç©ºé—´ï¼Œä¸ä¼šé€’å½’ã€‚</li>
</ul>
<pre><code class="language-bash">du -sh *
</code></pre>
<h2 id="æ–°å»ºæ–‡ä»¶">ğŸ‘‡ æ–°å»ºæ–‡ä»¶</h2>
<pre><code class="language-bash">touch aging_net.json
</code></pre>
<h2 id="æ–°å»ºæ–‡ä»¶å¤¹">ğŸ‘‡ æ–°å»ºæ–‡ä»¶å¤¹</h2>
<pre><code class="language-bash">mkdir -p xxx
</code></pre>
<h2 id="å¤åˆ¶æ–‡ä»¶å¤¹">ğŸ‘‡ å¤åˆ¶æ–‡ä»¶å¤¹</h2>
<pre><code class="language-bash">cp -r xxx yyy    # cp -r &lt;æºæ–‡ä»¶å¤¹&gt; &lt;ç›®æ ‡æ–‡ä»¶å¤¹&gt;
</code></pre>
<h2 id="æ¸…ç©ºæ–‡ä»¶å†…å®¹">ğŸ‘‡ æ¸…ç©ºæ–‡ä»¶å†…å®¹</h2>
<pre><code class="language-bash">cp /dev/null aging-res.log
dd if=/dev/null of=aging-res.log
</code></pre>
<h2 id="å»ºç«‹è½¯è¿æ¥">ğŸ‘‡ å»ºç«‹è½¯è¿æ¥</h2>
<pre><code class="language-bash">ln -s /tmp/auto-factory.service auto-factory.service    # ln -s &lt;ç›®æ ‡æ–‡ä»¶æˆ–ç›®å½•&gt; &lt;é“¾æ¥æ–‡ä»¶å&gt;
</code></pre>
<h2 id="wc-å‘½ä»¤ç›¸å…³">ğŸ‘‡ WC å‘½ä»¤ç›¸å…³</h2>
<ul>
<li>æŸ¥çœ‹æ–‡ä»¶é‡Œæœ‰å¤šå°‘è¡Œã€‚</li>
</ul>
<pre><code class="language-bash">wc -l filename
</code></pre>
<ul>
<li>æŸ¥çœ‹æ–‡ä»¶é‡Œæœ‰å¤šå°‘ä¸ª wordã€‚</li>
</ul>
<pre><code class="language-bash">wc -w filename
</code></pre>
<ul>
<li>æŸ¥çœ‹æ–‡ä»¶é‡Œæœ€é•¿çš„é‚£ä¸€è¡Œæ˜¯å¤šå°‘ä¸ªå­—ã€‚</li>
</ul>
<pre><code class="language-bash">wc -L filename
</code></pre>
<h2 id="å‹ç¼©å‘½ä»¤ç›¸å…³">ğŸ‘‡ å‹ç¼©å‘½ä»¤ç›¸å…³</h2>
<pre><code class="language-bash">tar czvf xxx.tar xxx    # tar czvf xxx.tar &lt;å‹ç¼©ç›®å½•&gt;
zip -r xxx.zip xxx       # zip -r xxx.zip &lt;å‹ç¼©ç›®å½•&gt;
</code></pre>
<h2 id="è§£å‹å‘½ä»¤ç›¸å…³">ğŸ‘‡ è§£å‹å‘½ä»¤ç›¸å…³</h2>
<ul>
<li>è§£å‹åˆ°æŒ‡å®šæ–‡ä»¶å¤¹ã€‚</li>
</ul>
<pre><code class="language-bash">tar zxvf xxx.tar -C /xxx/yyy/    # tar zxvf xxx.tar -C &lt;è§£å‹ç›®å½•&gt;
tar jxvf xxx.tar -C /xxx/yyy/     # tar jxvf xx.tar.bz2 -C &lt;è§£å‹ç›®å½•&gt;
unzip xxx.zip
</code></pre>
<h2 id="è®¾ç½®æ–‡ä»¶æ‰€å±å±æ€§">ğŸ‘‡ è®¾ç½®æ–‡ä»¶æ‰€å±å±æ€§</h2>
<pre><code class="language-bash">chown hyj.hyj xxx.log
</code></pre>
<h2 id="scp-ä¼ è¾“æ–‡ä»¶">ğŸ‘‡ SCP ä¼ è¾“æ–‡ä»¶</h2>
<ul>
<li>æ‹·è´è®¾å¤‡æ–‡ä»¶åˆ°ç”µè„‘ã€‚</li>
</ul>
<pre><code class="language-bash">scp root@192.168.100.141:/root/a.pcap .
</code></pre>
<ul>
<li>æ‹·è´ç”µè„‘æ–‡ä»¶åˆ°è®¾å¤‡ã€‚</li>
</ul>
<pre><code class="language-bash">scp .\wtmi_h.bin root@192.168.189.1:wtp
</code></pre>
<h2 id="æ ¼å¼åŒ–ç£ç›˜">ğŸ‘‡ æ ¼å¼åŒ–ç£ç›˜</h2>
<ul>
<li>ä½¿ç”¨è‡ªå®šä¹‰è„šæœ¬æ¥è¿›è¡Œæ ¼å¼åŒ–æ“ä½œã€‚</li>
</ul>
<pre><code class="language-bash">/usr/sbin/parted.sh init sda &gt; /dev/null 2&gt;&amp;1
/usr/sbin/parted.sh add sda 1 1G 83&gt; /dev/null 2&gt;&amp;1
mkfs.ext4 -F /dev/sda1 &gt; /dev/null 2&gt;&amp;1
</code></pre>
<h1 id="ç½‘ç»œç›¸å…³å‘½ä»¤æ“ä½œ">ğŸ‘‰ç½‘ç»œç›¸å…³å‘½ä»¤æ“ä½œğŸ‘ˆ</h1>
<h2 id="ç½‘ç»œé‡å¯">ğŸ‘‡ ç½‘ç»œé‡å¯</h2>
<pre><code class="language-bash">service network restart
</code></pre>
<h2 id="ç½‘å£ç›¸å…³è®¾ç½®">ğŸ‘‡ ç½‘å£ç›¸å…³è®¾ç½®</h2>
<ul>
<li>æŸ¥çœ‹ç½‘å¡ä¿¡æ¯ã€‚</li>
</ul>
<pre><code class="language-bash">ls -l /sys/class/net/
</code></pre>
<ul>
<li>ç½‘å¡è‡ªé€‚åº”å…³é—­ï¼Œå¹¶è®¾ç½®ç½‘å¡çš„é€Ÿåº¦ä¸º 100Mbpsï¼Œå…¨åŒå·¥æ¨¡å¼ã€‚</li>
</ul>
<pre><code class="language-bash">ethtool -s ge0 speed 100 duplex full autoneg off
</code></pre>
<ul>
<li>ç½‘å¡è‡ªé€‚åº”å¼€å¯ã€‚</li>
</ul>
<pre><code class="language-bash">ethtool -s ge0 autoneg on
</code></pre>
<ul>
<li>ç½‘å¡åˆ‡æ¢ combo</li>
</ul>
<pre><code class="language-bash">echo 0 &gt; /sys/class/net/ge0/combo_status
</code></pre>
<h1 id="uboot-ä¸‹ç›¸å…³å‘½ä»¤æ“ä½œ">ğŸ‘‰Uboot ä¸‹ç›¸å…³å‘½ä»¤æ“ä½œğŸ‘ˆ</h1>
<h2 id="uboot-ä¸‹è¯»å–å¯„å­˜å™¨">ğŸ‘‡ Uboot ä¸‹è¯»å–å¯„å­˜å™¨</h2>
<ul>
<li>Uboot ä¸‹ Mac ä¿¡æ¯è¯»å–ã€‚</li>
</ul>
<pre><code class="language-bash">i2c dev 1
i2c md 0x52 0 16          # ä»ç¬¬0ä¸ªå¯„å­˜å™¨å¼€å§‹è¯»ï¼Œå…±è¯»16ä¸ªå¯„å­˜å™¨
i2c mw 0x52 1e 0x30    # ç¬¬01å·å¯„å­˜å™¨ï¼Œå°†å®ƒç¬¬01å·å¯„å­˜å™¨çš„å€¼å†™ä¸º0x30ï¼Œæ˜¯å­—ç¬¦0
i2c mw 0x52 1f 0x30
i2c mw 0x52 20 0x31
</code></pre>
<h2 id="thank-you-for-browsingenjoy~">ğŸ˜˜ Thank you for browsingï¼ŒEnjoy~</h2>
]]></content>
    </entry>
    <entry>
        <title type="html"><![CDATA[Samba æœåŠ¡å™¨çš„é…ç½®]]></title>
        <id>https://dustmm.github.io/post/samba/</id>
        <link href="https://dustmm.github.io/post/samba/">
        </link>
        <updated>2024-07-29T09:22:59.000Z</updated>
        <content type="html"><![CDATA[<p>ğŸ‘ æ¬¢è¿ä½¿ç”¨<strong>Samba</strong>ï¼Œæœ¬æ–‡ä»¥ Ubuntu ç¯å¢ƒä¸ºä¾‹ï¼ŒSamba æ˜¯åœ¨ Linux ç³»ç»Ÿä¸Šå®ç° SMB åè®®çš„ä¸€ä¸ªå…è´¹è½¯ä»¶ï¼Œä»¥å®ç°æ–‡ä»¶å…±äº«å’Œæ‰“å°æœºæœåŠ¡å…±äº«ï¼</p>
<h2 id="å®‰è£…-samba">ğŸ‘‡ å®‰è£… Samba</h2>
<pre><code class="language-bash">sudo apt-get install samba
</code></pre>
<h2 id="åˆ›å»ºå…±äº«ç›®å½•">ğŸ‘‡ åˆ›å»ºå…±äº«ç›®å½•</h2>
<pre><code class="language-bash">mkdir /data/samba
</code></pre>
<h2 id="åˆ›å»º-samba-è´¦æˆ·">ğŸ‘‡ åˆ›å»º Samba è´¦æˆ·</h2>
<ul>
<li>æ–°å»º Samba è´¦æˆ·ã€‚</li>
</ul>
<pre><code class="language-bash">useradd -d /data/samba -s /sbin/nologin root-samba
useradd -d /data/samba -s /sbin/nologin hyj-samba
</code></pre>
<ul>
<li>ç®¡ç† Samba ç”¨æˆ·ã€‚</li>
</ul>
<pre><code class="language-bash">pdbedit -a -u root-samba
pdbedit -a -u hyj-samba
</code></pre>
<ul>
<li>æŸ¥çœ‹ Samba è´¦æˆ·åˆ—è¡¨ã€‚</li>
</ul>
<pre><code class="language-bash">pdbedit -L
</code></pre>
<h2 id="è®¾ç½®å…±äº«ç›®å½•æƒé™">ğŸ‘‡ è®¾ç½®å…±äº«ç›®å½•æƒé™</h2>
<ul>
<li>è®¾ç½® root-samba ç®¡ç†å‘˜æƒé™ã€‚</li>
</ul>
<pre><code class="language-bash">mkdir /data/samba/test
chown -R root-samba.root-samba /data/samba/
chmod -R 700 /data/samba/test
</code></pre>
<ul>
<li>è®¾ç½® hyj-samba æƒé™ã€‚</li>
</ul>
<pre><code class="language-bash">setfacl -R -m u:hyj-samba:rx /data/samba/test
</code></pre>
<h2 id="samba-æœåŠ¡é…ç½®">ğŸ‘‡ Samba æœåŠ¡é…ç½®</h2>
<ul>
<li>è®¾ç½® Samba æœåŠ¡é…ç½®ã€‚</li>
</ul>
<pre><code class="language-bash">vi  /etc/samba/smb.conf
######æ–‡ä»¶ä¿®æ”¹å†…å®¹å¦‚ä¸‹######
[share]
comment = share folder
path = /data/samba
public = no
# valid users = root-samba,hyj-samba,@samba
# printable = no
directory mask = 0777
write list = root-samba
read list = root-samba,hyj-samba
######æ–‡ä»¶ä¿®æ”¹å†…å®¹ç»“æŸ######
</code></pre>
<ul>
<li>é‡å¯ Samba æœåŠ¡ã€‚</li>
</ul>
<pre><code class="language-bash">service smbd restart
</code></pre>
<h2 id="windows-æµ‹è¯•æƒé™">ğŸ‘‡ Windows æµ‹è¯•æƒé™</h2>
<ul>
<li>æŒ‰é”® Ctrl+Eï¼Œæ‰“å¼€æ­¤â€œç”µè„‘â€ï¼Œç„¶åç‚¹å‡»å·¦ä¾§æ çš„â€œç½‘ç»œâ€ï¼Œæ¥ç€åœ¨ä¸Šä¾§çš„ç½‘ç»œæ ç›®é‡Œè¾“å…¥ Samba åœ°å€ï¼Œç„¶åè¾“å…¥ Samba è´¦å·å’Œå¯†ç ï¼Œå°±å¯ä»¥ç™»å½•åˆ° Samba å…±äº«ç›®å½•äº†ã€‚</li>
</ul>
<pre><code class="language-bash">\\192.168.85.11
</code></pre>
<ul>
<li>é»˜è®¤ Windows ä¸‹ä¼šä¿æŒè¿æ¥ï¼Œéœ€æ–­å¼€è¿æ¥é‡æ–°ç™»é™†ã€‚</li>
</ul>
<pre><code class="language-bash">net use
net use \\192.168.85.11\share /del /y
</code></pre>
<h2 id="thank-you-for-browsingenjoy~">ğŸ˜˜ Thank you for browsingï¼ŒEnjoy~</h2>
]]></content>
    </entry>
    <entry>
        <title type="html"><![CDATA[å®‰å“ Termux è½¯ä»¶]]></title>
        <id>https://dustmm.github.io/post/termux/</id>
        <link href="https://dustmm.github.io/post/termux/">
        </link>
        <updated>2024-07-24T08:16:41.000Z</updated>
        <content type="html"><![CDATA[<p>ğŸ‘ æ¬¢è¿ä½¿ç”¨<strong>Termux</strong>ï¼Œæœ¬æ–‡ä»¥å®‰å“æ‰‹æœºä¸ºä¾‹ï¼Œè¯·è®¿é—®<a href="https://f-droid.org/packages/com.termux/">å®˜æ–¹ç½‘ç«™</a>ä¸‹è½½ï¼</p>
<h2 id="å®‰è£…-termux">ğŸ‘‡ å®‰è£… Termux</h2>
<ul>
<li>ç”¨ä¸Šé¢æä¾›çš„é“¾æ¥ä¸‹è½½å®‰è£…ã€‚</li>
</ul>
<h2 id="æ›´æ¢æ¸…åæº">ğŸ‘‡ æ›´æ¢æ¸…åæº</h2>
<pre><code class="language-bash">sed -i 's@^\(deb.*stable main\)$@#\1\ndeb https://mirrors.tuna.tsinghua.edu.cn/termux/termux-packages-24 stable main@' $PREFIX/etc/apt/sources.list
sed -i 's@^\(deb.*games stable\)$@#\1\ndeb https://mirrors.tuna.tsinghua.edu.cn/termux/game-packages-24 games stable@' $PREFIX/etc/apt/sources.list.d/game.list
sed -i 's@^\(deb.*science stable\)$@#\1\ndeb https://mirrors.tuna.tsinghua.edu.cn/termux/science-packages-24 science stable@' $PREFIX/etc/apt/sources.list.d/science.list
pkg update
</code></pre>
<h2 id="è®¾ç½®ç”¨æˆ·å¯†ç ">ğŸ‘‡ è®¾ç½®ç”¨æˆ·å¯†ç </h2>
<ul>
<li>è¾“å…¥ passwdï¼Œè¾“å…¥ä¸¤æ¬¡è¦è®¾ç½®çš„å¯†ç ã€‚å¼€å¯ ssh æœåŠ¡å¹¶æŸ¥çœ‹å½“å‰å†…ç½‘åœ°å€ã€‚</li>
</ul>
<pre><code class="language-bash">sshd
ifconfig
</code></pre>
<h2 id="è®¾ç½®-storage-è½¯é“¾æ¥">ğŸ‘‡ è®¾ç½® Storage è½¯é“¾æ¥</h2>
<ul>
<li>åœ¨ Termux ä¸­è¾“å…¥ä»¥ä¸‹å‘½ä»¤ï¼Œåº”è¯¥ä¼šå¼¹æ¡†ç¡®è®¤æ˜¯å¦æˆæƒã€‚æˆåŠŸæ‹¿åˆ°å­˜å‚¨æƒé™åï¼Œä¼šåœ¨ home ç›®å½•ç”Ÿæˆ storage ç›®å½•ï¼Œå¹¶ä¸”ç”Ÿæˆè‹¥å¹²ç›®å½•ï¼Œè½¯è¿æ¥éƒ½æŒ‡å‘å¤–ç½®å­˜å‚¨å¡çš„ç›¸åº”ç›®å½•ã€‚</li>
<li>å€¼å¾—æ³¨æ„çš„æ˜¯ï¼Œstorage ç›®å½•ä¸‹æœ‰ä¸€ä¸ª shared çš„ç›®å½•ï¼Œåœ¨è¿™ä¸ª shared ç›®å½•ä¸­æ˜ å°„åˆ°æˆ‘ä»¬æ‰‹æœºå†…éƒ¨å­˜å‚¨çš„ç›®å½•ã€‚</li>
</ul>
<h2 id="ssh-è¿œç¨‹ç™»å½•">ğŸ‘‡ SSH è¿œç¨‹ç™»å½•</h2>
<pre><code class="language-bash">ssh -p 8022 root@192.168.85.137
</code></pre>
<h2 id="å†…ç½‘ç©¿é€å®ç°">ğŸ‘‡ å†…ç½‘ç©¿é€å®ç°</h2>
<ul>
<li>å®ƒä¼šåˆ›å»ºä¸€ä¸ª DNS è§£ææ–‡ä»¶ï¼Œè·¯å¾„åœ¨ $PREFIX/etc/resolv.confï¼Œé‡Œé¢æœ‰é…ç½® DNS è§£ææœåŠ¡å™¨åœ°å€ï¼Œé»˜è®¤å·²ç»åŠ äº† 8.8.8.8</li>
</ul>
<pre><code class="language-bash">apt install dnsutils
</code></pre>
<ul>
<li>ä¸‹è½½æœ€æ–°çš„ cpolar å®¢æˆ·ç«¯ã€‚</li>
</ul>
<pre><code class="language-bash">curl -O -L https://www.cpolar.com/static/downloads/cpolar-stable-linux-arm.zip
unzip cpolar-stable-linux-arm.zip
</code></pre>
<ul>
<li>å®˜ç½‘ä¸‹è·å–è®¤è¯çš„ token</li>
</ul>
<pre><code class="language-bash">./cpolar authtoken NmJmMTgwMzYtOTE5ZS00YmE0LWE1MDctYjUxYTQ3MDkyZGY2
</code></pre>
<ul>
<li>æ˜ å°„ 8000 ç«¯å£åˆ°å¤–ç½‘ã€‚</li>
</ul>
<pre><code class="language-bash">./cpolar http -region=cn 8000
</code></pre>
<h2 id="å®‰è£…-ubuntu">ğŸ‘‡ å®‰è£… Ubuntu</h2>
<ul>
<li>å®‰è£… proot-distrot åŠ Ubuntuã€‚</li>
</ul>
<pre><code class="language-bash">apt install proot-distro
proot-distro install ubuntu
</code></pre>
<ul>
<li>ç™»å½• Ubuntuã€‚</li>
</ul>
<pre><code class="language-bash">proot-distro login ubuntu
</code></pre>
<ul>
<li>å®‰è£…ä¸€äº›å¿…è¦å·¥å…·ã€‚</li>
</ul>
<pre><code class="language-bash">apt update
apt install vim python3 openssh-server -y
</code></pre>
<ul>
<li>é…ç½®ä¸€ä¸‹ ssh çš„é…ç½®ï¼Œä¸»è¦æ˜¯ç«¯å£ï¼Œç”¨äºåŒºåˆ†å¤–éƒ¨çš„ ssh</li>
</ul>
<pre><code class="language-bash">vi /etc/ssh/sshd_config
######æ–‡ä»¶ä¿®æ”¹å†…å®¹å¦‚ä¸‹######
PermitRootLogin yes
Port 2222
######æ–‡ä»¶ä¿®æ”¹å†…å®¹ç»“æŸ######
service ssh start
</code></pre>
<h2 id="thank-you-for-browsingenjoy~">ğŸ˜˜ Thank you for browsingï¼ŒEnjoy~</h2>
]]></content>
    </entry>
    <entry>
        <title type="html"><![CDATA[GIT çš„å¸¸ç”¨å‘½ä»¤æ“ä½œ]]></title>
        <id>https://dustmm.github.io/post/git-use/</id>
        <link href="https://dustmm.github.io/post/git-use/">
        </link>
        <updated>2024-07-24T07:36:19.000Z</updated>
        <content type="html"><![CDATA[<p>ğŸ‘ æ¬¢è¿ä½¿ç”¨<strong>GIT</strong>ï¼Œæœ¬æ–‡ä¸»è¦è®°å½•ä¸ªäººå¸¸ç”¨çš„ GIT æ“ä½œå‘½ä»¤ï¼</p>
<h2 id="git-æäº¤æ“ä½œ">ğŸ‘‡ GIT æäº¤æ“ä½œ</h2>
<ul>
<li>å°†æœ¬åœ°ä¿®æ”¹æ“ä½œè¿›è¡Œæäº¤ã€‚</li>
</ul>
<pre><code class="language-bash">git add .
git status
git commit -m &quot;æäº¤æè¿°&quot;
git log
</code></pre>
<h2 id="git-æš‚å­˜æ“ä½œ">ğŸ‘‡ GIT æš‚å­˜æ“ä½œ</h2>
<ul>
<li>å°†æœ¬åœ°ä¿®æ”¹æ“ä½œè¿›è¡Œæš‚å­˜ã€‚</li>
</ul>
<pre><code class="language-bash">git stash
git stash list
git pull
git stash pop
git stash drop 0    # åˆ é™¤ç´¢å¼•ä¸º0çš„æš‚å­˜åŒº
</code></pre>
<h2 id="git-åˆå¹¶å•ä¸ªæäº¤">ğŸ‘‡ GIT åˆå¹¶å•ä¸ªæäº¤</h2>
<ul>
<li>éœ€è¦æŠŠ A åˆ†æ”¯ä¸Šæäº¤çš„éƒ¨åˆ†ä»£ç ï¼Œæ”¾åœ¨ B åˆ†æ”¯ä¸Šã€‚</li>
</ul>
<pre><code class="language-bash">git checkout B
git cherry-pick af53a2a6
git push origin B
</code></pre>
<h2 id="git-é‡æ–°æäº¤">ğŸ‘‡ GIT é‡æ–°æäº¤</h2>
<ul>
<li>æ’¤é”€æœ€è¿‘ n ä¸ªæäº¤ï¼Œå˜æˆ add çŠ¶æ€ï¼Œå¯ä»¥é‡æ–°æäº¤ã€‚</li>
</ul>
<pre><code class="language-bash">git reset --soft HEAD~n
</code></pre>
<ul>
<li>å›æ»šæœ€è¿‘ n ä¸ªæäº¤ï¼Œä»£ç å½»åº•åˆ é™¤äº†ï¼Œæ‰¾ä¸å›æ¥ã€‚</li>
</ul>
<pre><code class="language-bash">git reset --hard HEAD~1
</code></pre>
<ul>
<li>å¦‚æœä¸Šè¿°æäº¤å·²ç»æ¨é€è¿œç¨‹ï¼Œéœ€è¦å¼ºåˆ¶æ¨é€åˆ°è¿œç¨‹ã€‚</li>
</ul>
<pre><code class="language-bash">git push -f
</code></pre>
<h2 id="git-æŸ¥çœ‹æäº¤ä¿®æ”¹çš„æ–‡ä»¶">ğŸ‘‡ GIT æŸ¥çœ‹æäº¤ä¿®æ”¹çš„æ–‡ä»¶</h2>
<ul>
<li>æŸ¥çœ‹æ¯æ¡ commoit_id ä¿®æ”¹çš„æ–‡ä»¶ã€‚</li>
</ul>
<pre><code class="language-bash">git log --stat
</code></pre>
<h2 id="git-æ’¤é”€æ‰è¿œç¨‹æäº¤">ğŸ‘‡ GIT æ’¤é”€æ‰è¿œç¨‹æäº¤</h2>
<ul>
<li>æ’¤é”€æäº¤ï¼Œä¿ç•™å½“å‰å·¥ä½œåŒºã€‚</li>
</ul>
<pre><code class="language-bash">git reset --soft 6b418bf0840a9024f610609b320cf7bf4d24cbe4
</code></pre>
<ul>
<li>å¼ºåˆ¶æäº¤å½“å‰ç‰ˆæœ¬å·ã€‚</li>
</ul>
<pre><code class="language-bash">git push -f
</code></pre>
<ul>
<li>ä¿®æ”¹ä»£ç åï¼Œé‡æ–°æäº¤ã€‚</li>
</ul>
<h2 id="git-å»é™¤-m-çš„æ–¹æ³•">ğŸ‘‡ GIT å»é™¤ ^M çš„æ–¹æ³•</h2>
<ul>
<li>å¦‚æœ git diff ä¸­å­˜åœ¨ ^Mï¼ŒæŸ¥çœ‹å½“å‰ä»“åº“é…ç½®ä¿¡æ¯ã€‚</li>
</ul>
<pre><code class="language-bash">git config --local --list
</code></pre>
<ul>
<li>æŸ¥çœ‹å½“å‰ç”¨æˆ·ï¼ˆglobalï¼‰é…ç½®ä¿¡æ¯ã€‚</li>
</ul>
<pre><code class="language-bash">git config --global --list
</code></pre>
<ul>
<li>å‘Šè¯‰ GIT å¿½ç•¥è¡Œå°¾çš„å›è½¦ã€‚</li>
</ul>
<pre><code class="language-bash">git config --global core.whitespace cr-at-eol
</code></pre>
<h2 id="thank-you-for-browsingenjoy~">ğŸ˜˜ Thank you for browsingï¼ŒEnjoy~</h2>
]]></content>
    </entry>
    <entry>
        <title type="html"><![CDATA[WSL çš„å®‰è£…ä¸ä½¿ç”¨]]></title>
        <id>https://dustmm.github.io/post/wsl-install-use/</id>
        <link href="https://dustmm.github.io/post/wsl-install-use/">
        </link>
        <updated>2024-07-23T11:29:13.000Z</updated>
        <content type="html"><![CDATA[<p>ğŸ‘ æ¬¢è¿ä½¿ç”¨<strong>WSL</strong>ï¼ŒWindows ä¸‹çš„ Linux å­ç³»ç»Ÿï¼Œä¸ªäººæ„Ÿè§‰æ¯”å®‰è£…è™šæ‹Ÿæœºè½¯ä»¶æ¥çš„å¥½ç”¨æ–¹ä¾¿ï¼Œæœ¬æ–‡ä»¥ WSL å®‰è£… Ubuntu-18.04 è¿›è¡Œè®²è§£ï¼</p>
<h2 id="wsl-çš„å®‰è£…">ğŸ‘‡ WSL çš„å®‰è£…</h2>
<ul>
<li>è®¾ç½®é»˜è®¤å®‰è£… WSL Version ä¸º 2</li>
</ul>
<pre><code class="language-bash">wsl --set-default-version 2
</code></pre>
<ul>
<li>æŸ¥çœ‹å½“å‰å¯å®‰è£…å‘è¡Œç‰ˆã€‚</li>
</ul>
<pre><code class="language-bash">wsl --list --online
</code></pre>
<ul>
<li>å®‰è£…ä½ æ‰€éœ€çš„å‘è¡Œç‰ˆã€‚</li>
</ul>
<pre><code class="language-bash">wsl --install -d Ubuntu-18.04
</code></pre>
<ul>
<li>æŸ¥çœ‹ WSL ä¿¡æ¯ã€‚</li>
</ul>
<pre><code class="language-bash">wsl -l -v
</code></pre>
<h2 id="wsl-çš„å¯¼å…¥å’Œå¯¼å‡º">ğŸ‘‡ WSL çš„å¯¼å…¥å’Œå¯¼å‡º</h2>
<ul>
<li>WSL çš„å¼€æœºå’Œå…³æœºæ“ä½œã€‚</li>
</ul>
<pre><code class="language-bash">net start LxssManager
net stop LxssManager
wsl --shutdown
</code></pre>
<ul>
<li>å¯¼å‡ºè™šæ‹Ÿæœºã€‚</li>
</ul>
<pre><code class="language-bash">wsl --export Ubuntu-18.04 D:\Ubuntu-18.04.tar    # wsl --export &lt;ç³»ç»Ÿç‰ˆæœ¬&gt; &lt;æ–‡ä»¶å/æ–‡ä»¶è·¯å¾„&gt;
</code></pre>
<ul>
<li>æ³¨é”€åŸæœ‰å·²ç»å®‰è£…çš„è™šæ‹Ÿæœº ã€‚</li>
</ul>
<pre><code class="language-bash">wsl --unregister Ubuntu-18.04    # wsl --unregister &lt;ç³»ç»Ÿç‰ˆæœ¬&gt;
</code></pre>
<ul>
<li>å¯¼å…¥è™šæ‹Ÿæœºè‡³æ–°ä½ç½®ã€‚</li>
</ul>
<pre><code class="language-bash">wsl --import Ubuntu-18.04 D:\WSL D:\Ubuntu-18.04.tar    # wsl --import &lt;ç³»ç»Ÿç‰ˆæœ¬&gt; &lt;å®‰è£…è·¯å¾„&gt; &lt;æ–‡ä»¶å/æ–‡ä»¶è·¯å¾„&gt;
</code></pre>
<ul>
<li>è®¾ç½®é»˜è®¤ç”¨æˆ·ã€‚</li>
</ul>
<pre><code class="language-bash">vi /etc/wsl.conf
######æ–‡ä»¶ä¿®æ”¹å†…å®¹å¦‚ä¸‹######
[user]
default=hyj
######æ–‡ä»¶ä¿®æ”¹å†…å®¹ç»“æŸ######
</code></pre>
<h2 id="wsl-è¿œç¨‹è¿æ¥æ“ä½œ">ğŸ‘‡ WSL è¿œç¨‹è¿æ¥æ“ä½œ</h2>
<ul>
<li>å®‰è£… openssh-server æœåŠ¡ï¼Œè‡ªå¸¦çš„ä¼šæœ‰é—®é¢˜ï¼Œéœ€å¸è½½åé‡æ–°å®‰è£…ã€‚</li>
</ul>
<pre><code class="language-bash">sudo apt remove openssh-server     # å¸è½½
sudo apt install openssh-server       # å®‰è£…
</code></pre>
<ul>
<li>é…ç½® SSH å‚æ•°ã€‚</li>
</ul>
<pre><code class="language-bash">sudo vi /etc/ssh/sshd_config
######æ–‡ä»¶ä¿®æ”¹å†…å®¹å¦‚ä¸‹######
Port 22
PasswordAuthentication yes
######æ–‡ä»¶ä¿®æ”¹å†…å®¹ç»“æŸ######
</code></pre>
<ul>
<li>é‡å¯ SSH æœåŠ¡ã€‚</li>
</ul>
<pre><code class="language-bash">sudo service ssh restart
</code></pre>
<ul>
<li>æµ‹è¯• SSH æœåŠ¡ã€‚</li>
</ul>
<pre><code class="language-bash"># æµ‹è¯•SSHæ˜¯å¦æ­£å¸¸
        # usernameï¼šwslç”¨æˆ·å
        # ipadrressï¼šwslä¸­IPåœ°å€
        # portï¼šä¸Šé¢è®¾ç½®çš„port22æˆ–å…¶ä»–
ssh username@ipaddress -p port
</code></pre>
<ul>
<li>é…ç½®ç«¯å£è½¬å‘è§„åˆ™ã€‚</li>
</ul>
<pre><code class="language-bash"># é…ç½®ç«¯å£è½¬å‘
        # listenaddress:0.0.0.0
        # listenport:ç›‘å¬ç«¯å£
        # connectaddress:WSL ipåœ°å€
        # connectport:WSL sshd_configæ–‡ä»¶ä¸­çš„Portå€¼
netsh interface portproxy add v4tov4 listenaddress=0.0.0.0 listenport=2222 connectaddress=172.24.219.130 connectport=22
</code></pre>
<ul>
<li>å¼€å¯ windows é˜²ç«å¢™å…¥ç«™è§„åˆ™ã€‚</li>
</ul>
<pre><code class="language-bash">netsh advfirewall firewall add rule name=WSL2 dir=in action=allow protocol=TCP localport=2222
</code></pre>
<ul>
<li>æŸ¥çœ‹è½¬å‘ç«¯å£å‘½ä»¤ã€‚</li>
</ul>
<pre><code class="language-bash">netsh interface portproxy show all
</code></pre>
<ul>
<li>åˆ é™¤ç«¯å£è½¬å‘å‘½ä»¤ã€‚</li>
</ul>
<pre><code class="language-bash">netsh interface portproxy delete v4tov4 listenport=22 listenaddress=0.0.0.0
</code></pre>
<ul>
<li>å±€åŸŸç½‘å…¶ä»–ç”µè„‘ç™»å½• WSLã€‚</li>
</ul>
<pre><code class="language-bash"># è¿æ¥WSLå‘½ä»¤
        # username:wslç”¨æˆ·å
        # ipaddress:wsl IPåœ°å€
        # port:ç«¯å£è½¬å‘è§„åˆ™ä¸­çš„listenport
ssh username@ipaddress -p port
ssh root@192.168.85.99 -p 2222
</code></pre>
<h2 id="thank-you-for-browsingenjoy~">ğŸ˜˜ Thank you for browsingï¼ŒEnjoy~</h2>
]]></content>
    </entry>
    <entry>
        <title type="html"><![CDATA[Ubuntu æ— äººå€¼å®ˆå®‰è£…]]></title>
        <id>https://dustmm.github.io/post/ubuntu-autoinstall/</id>
        <link href="https://dustmm.github.io/post/ubuntu-autoinstall/">
        </link>
        <updated>2024-07-19T07:33:14.000Z</updated>
        <content type="html"><![CDATA[<p>ğŸ‘ æ¬¢è¿ä½¿ç”¨<strong>Ubuntu</strong>ï¼Œæœ¬æ–‡ä»¥X86ç¡¬ä»¶æ¶æ„ä¸ºä¾‹ï¼Œè¯·è®¿é—®<a href="https://cn.ubuntu.com/download">å®˜æ–¹é•œåƒç«™</a>ä¸‹è½½ï¼</p>
<h2 id="ubuntu-ç³»ç»Ÿå¯åŠ¨ç›˜">ğŸ‘‡ Ubuntu ç³»ç»Ÿå¯åŠ¨ç›˜</h2>
<ul>
<li>é€šè¿‡ä¸Šè¿°ä¸‹è½½çš„é•œåƒï¼Œä½¿ç”¨ rufus åˆ¶ä½œ U ç›˜å¯åŠ¨ç›˜ï¼Œæ­¤è¿‡ç¨‹ä¸åšè¿‡å¤šèµ˜è¿°ï¼</li>
</ul>
<h2 id="u-ç›˜å®ç°æ— äººå€¼å®ˆå®‰è£…">ğŸ‘‡ U ç›˜å®ç°æ— äººå€¼å®ˆå®‰è£…</h2>
<h3 id="1ï¸âƒ£-é€šè¿‡-autoinstallyaml-æ–‡ä»¶å®ç°">1ï¸âƒ£ é€šè¿‡ autoinstall.yaml æ–‡ä»¶å®ç°</h3>
<p>è¯¥æ–¹å¼æ— éœ€ä¿®æ”¹ grub.cfgï¼Œåœ¨å¯åŠ¨ç›˜æ ¹ç›®å½•æ”¾ç½® autoinstall.yaml æ–‡ä»¶ï¼Œå¯åŠ¨ç³»ç»Ÿåå°†è‡ªè¡Œå®‰è£…ç³»ç»Ÿã€‚</p>
<ul>
<li>autoinstall.yaml æ–‡ä»¶å†…å®¹å¦‚ä¸‹ã€‚</li>
</ul>
<pre><code class="language-bash">version: 1
early-commands:
  - echo 'It is me'
  - sleep 1
  - echo 'Use autoinstall'
locale: en_GB.UTF-8
apt:
  mirror-selection:
    primary:
      - country-mirror
      - arches: &amp;id001
        - amd64
        - i386
        uri: http://archive.ubuntu.com/ubuntu/
      - arches: &amp;id002
        - s390x
        - arm64
        - armhf
        - powerpc
        - ppc64el
        - riscv64
        uri: http://ports.ubuntu.com/ubuntu-ports
    preserve_sources_list: false
    security:
    - arches: *id001
      uri: http://security.ubuntu.com/ubuntu/
    - arches: *id002
      uri: http://ports.ubuntu.com/ubuntu-ports
late-commands:
  - echo late
  - sleep 1
  - echo late
error-commands:
  - echo OH NOES
  - sleep 5
  - echo OH WELL

identity:
    hostname: ubuntu
    password: $6$5Y1CqzzfE.WLueH4$AVXtEYRvCb/HSqH8KysClx4z29q1fQIkX0qtHe7KZWOS8gagQ9ZyQBZcXqSWj1Xcvty7waPfwoM/9d44GYmFL1
    realname: xspeed
    username: xspeed
keyboard:
  layout: gb
kernel:
  package: linux-generic
source:
  id: ubuntu-server-minimal
  search_drivers: false
storage:
  layout:
    name: lvm
</code></pre>
<h3 id="2ï¸âƒ£-é€šè¿‡-user-data-æ–‡ä»¶å®ç°">2ï¸âƒ£ é€šè¿‡ user-data æ–‡ä»¶å®ç°</h3>
<p>è¯¥æ–¹å¼éœ€ä¿®æ”¹ grub.cfgï¼Œä¼˜å…ˆçº§é«˜äº autoinstall.yaml å®‰è£…æ–¹å¼ï¼Œåœ¨å¯åŠ¨ç›˜æ ¹ç›®å½•æ”¾ç½® user-data å’Œ meta-data æ–‡ä»¶ï¼Œå…¶ä¸­ meta-data æ–‡ä»¶æ˜¯ä¸€ä¸ªä»¥ meta-data å‘½åçš„ç©ºæ–‡ä»¶ï¼Œå¯åŠ¨ç³»ç»Ÿåå°†è‡ªè¡Œå®‰è£…ç³»ç»Ÿã€‚</p>
<ul>
<li>grub.cfg æ–‡ä»¶å†…å®¹éœ€è¦æ³¨æ„å†’å·å‰åˆ†å·è¦åŠ ä¸Šï¼Œå¦åˆ™å¯èƒ½å¯¼è‡´ä¼ é€’å¼‚å¸¸æˆªæ–­ã€‚</li>
</ul>
<pre><code class="language-bash">linux	/casper/vmlinuz autoinstall ds=nocloud\;s=/cdrom/ console=ttyS0,115200n8 ---
</code></pre>
<ul>
<li>user-data æ–‡ä»¶å†…å®¹å¦‚ä¸‹ã€‚</li>
</ul>
<pre><code class="language-bash">#cloud-config
autoinstall:
  early-commands:
    - echo 'It is me'
    - sleep 1
    - echo 'Use user-data'
  apt:
    disable_components: []
    fallback: abort
    geoip: true
    mirror-selection:
      primary:
      - country-mirror
      - arches: &amp;id001
        - amd64
        - i386
        uri: http://archive.ubuntu.com/ubuntu/
      - arches: &amp;id002
        - s390x
        - arm64
        - armhf
        - powerpc
        - ppc64el
        - riscv64
        uri: http://ports.ubuntu.com/ubuntu-ports
    preserve_sources_list: false
    security:
    - arches: *id001
      uri: http://security.ubuntu.com/ubuntu/
    - arches: *id002
      uri: http://ports.ubuntu.com/ubuntu-ports
  codecs:
    install: false
  drivers:
    install: false
  identity:
    hostname: ubuntu
    password: $6$5Y1CqzzfE.WLueH4$AVXtEYRvCb/HSqH8KysClx4z29q1fQIkX0qtHe7KZWOS8gagQ9ZyQBZcXqSWj1Xcvty7waPfwoM/9d44GYmFL1
    realname: xspeed
    username: xspeed
  kernel:
    package: linux-generic
  keyboard:
    layout: us
    toggle: null
    variant: ''
  locale: en_US.UTF-8
  oem:
    install: auto
  source:
    id: ubuntu-server-minimal
    search_drivers: false
  ssh:
    allow-pw: true
    authorized-keys: []
    install-server: false
  storage:
    layout:
      name: lvm
  updates: security
  version: 1
</code></pre>
<h2 id="ç½‘ç»œæ— äººå€¼å®ˆå®‰è£…">ğŸ‘‡ ç½‘ç»œæ— äººå€¼å®ˆå®‰è£…</h2>
<p>å¯åŠ¨ç›˜ä»…ä¿ç•™å¯åŠ¨æ–‡ä»¶ç›¸å…³çš„ä¸‰ä¸ªç›®å½•ï¼Œbootï¼Œcasperï¼ŒEFIï¼Œè¯¥æ–¹å¼éœ€ä¿®æ”¹ grub.cfgï¼Œå¯åŠ¨ç³»ç»Ÿåå°†è‡ªè¡Œå®‰è£…ç³»ç»Ÿã€‚</p>
<ul>
<li>grub.cfg æ–‡ä»¶å†…å®¹éœ€è¦æ³¨æ„å†’å·å‰åˆ†å·è¦åŠ ä¸Šï¼Œå¦åˆ™å¯èƒ½å¯¼è‡´ä¼ é€’å¼‚å¸¸æˆªæ–­ã€‚</li>
</ul>
<pre><code class="language-bash">linux	/casper/vmlinuz ip=dhcp url=http://192.168.85.235:70/chfs/shared/ISO/Ubuntu/ubuntu-22.04.4-live-server-amd64.iso autoinstall ds=nocloud-net\;s=http://192.168.85.235:70/chfs/shared/ISO/Ubuntu/ console=ttyS0,115200n8 ---
</code></pre>
<ul>
<li>éœ€è¦æ­å»ºä¸€ä¸ª http æœåŠ¡ï¼Œå¹¶å°†æœ¬æ–‡æ¡£æè¿°çš„ meta-dataï¼Œuser-dataï¼Œiso é•œåƒï¼ˆå®˜ç½‘ä¸‹è½½ï¼‰æ”¾ç½®åœ¨ http æ–‡ä»¶æœåŠ¡å™¨ä¸Šã€‚</li>
</ul>
<h2 id="é‡å‘è®°å½•">ğŸ‘‡ é‡å‘è®°å½•</h2>
<ul>
<li>ç½‘ç»œå®‰è£…æ—¶å€™ï¼Œä½¿ç”¨çš„è®¾å¤‡ç½‘å¡éœ€å…·æœ‰å”¯ä¸€ macï¼Œå¦åˆ™è‡ªåŠ¨å®‰è£…å°†ä¼šå¤±è´¥ä¸­æ–­ã€‚</li>
<li>ä½¿ç”¨ user-data æˆ– autoinstall.yaml è¿›è¡Œæ— äººå®‰è£…ï¼Œæ–‡ä»¶æ ¼å¼éœ€ä¸¥æ ¼æŒ‰ç…§ yaml ç¼–å†™ï¼Œä¸ç„¶ä¼šè¯†åˆ«ä¸åˆ°ï¼Œå¯¼è‡´è‡ªåŠ¨å®‰è£…å¼‚å¸¸ã€‚</li>
<li>user-data éœ€è¦é…åˆä¿®æ”¹ grub.cfgï¼Œå…¶ä¸­ grub.cfg æŒ‡å®šçš„ ds å‚æ•°å¸¦çš„ï¼›éœ€è¦ã€è¿›è¡Œè½¬ä¹‰ï¼Œå¦åˆ™åŒæ ·ä¼šå¯¼è‡´è‡ªåŠ¨å®‰è£…å¼‚å¸¸ã€‚</li>
</ul>
<h2 id="thank-you-for-browsingenjoy~">ğŸ˜˜ Thank you for browsingï¼ŒEnjoy~</h2>
]]></content>
    </entry>
    <entry>
        <title type="html"><![CDATA[Centos æœåŠ¡å™¨çš„æ­å»º]]></title>
        <id>https://dustmm.github.io/post/centos-server/</id>
        <link href="https://dustmm.github.io/post/centos-server/">
        </link>
        <updated>2024-07-18T02:03:14.000Z</updated>
        <content type="html"><![CDATA[<p>ğŸ‘ æ¬¢è¿ä½¿ç”¨<strong>Centos</strong>ï¼Œæœ¬æ–‡ä»¥X86ç¡¬ä»¶æ¶æ„ä¸ºä¾‹ï¼Œè¯·è®¿é—®<a href="https://vault.centos.org/7.6.1810/isos/x86_64/">å®˜æ–¹é•œåƒç«™</a>ä¸‹è½½ï¼</p>
<h2 id="centos-ç³»ç»Ÿå®‰è£…">ğŸ‘‡ Centos ç³»ç»Ÿå®‰è£…</h2>
<ul>
<li>é€šè¿‡ä¸Šè¿°ä¸‹è½½çš„é•œåƒï¼Œä½¿ç”¨ rufus åˆ¶ä½œ U ç›˜å¯åŠ¨ç›˜ï¼Œå¹¶è®°å½• U ç›˜ç›˜ç¬¦ï¼Œé€‰æ‹© Troubleshootingï¼Œæ·»åŠ  grub å¯åŠ¨å‚æ•°ï¼Œå¦åˆ™æ— è¾“å‡ºï¼</li>
</ul>
<pre><code class="language-bash">LABEL=Uç›˜ç›˜ç¬¦ console=ttyS0,115200n8
</code></pre>
<h2 id="è°ƒæ•´é»˜è®¤-lvm-åˆ†åŒº">ğŸ‘‡ è°ƒæ•´é»˜è®¤ LVM åˆ†åŒº</h2>
<p><strong>å¦‚æœä½ å¹¶ä¸æ˜¯ä½¿ç”¨è¿™ä¸ªåˆ†åŒºæ–¹å¼ï¼Œè¯·æ— è§†æ­¤éƒ¨åˆ†æ“ä½œã€‚</strong></p>
<ul>
<li>å¦‚æœå·²ç»æŒ‚è½½ï¼Œå…ˆå¸è½½Â /homeÂ ç›®å½•ã€‚</li>
</ul>
<pre><code class="language-bash">sudo umount /home
</code></pre>
<ul>
<li>åˆ é™¤é€»è¾‘å·Â centos-home</li>
</ul>
<pre><code class="language-bash">sudo lvremove /dev/mapper/centos-home
</code></pre>
<ul>
<li>è°ƒæ•´Â centos-swapÂ é€»è¾‘å·çš„å¤§å°ä¸º 8GB</li>
</ul>
<pre><code class="language-bash">sudo lvresize -L 8G /dev/mapper/centos-swap
</code></pre>
<ul>
<li>æ‰©å±•Â centos-rootÂ é€»è¾‘å·ä»¥åŒ…å«å‰©ä½™ç©ºé—´ã€‚</li>
</ul>
<pre><code class="language-bash">sudo lvextend -l +100%FREE /dev/mapper/centos-root
</code></pre>
<ul>
<li>å¦‚æœÂ centos-rootÂ åŒ…å«æ–‡ä»¶ç³»ç»Ÿï¼Œéœ€è¦è°ƒæ•´æ–‡ä»¶ç³»ç»Ÿå¤§å°ã€‚</li>
</ul>
<pre><code class="language-bash">sudo resize2fs /dev/mapper/centos-root
</code></pre>
<ul>
<li>å¦‚æœæ˜¯æ–‡ä»¶ç³»ç»Ÿæ˜¯ xfs æ ¼å¼ã€‚</li>
</ul>
<pre><code class="language-bash">xfs_growfs /dev/mapper/centos-root
</code></pre>
<ul>
<li>ç¼©å°åˆ†åŒºæ“ä½œã€‚</li>
</ul>
<pre><code class="language-bash">lvreduce -L -10G /dev/mapper/cl-root
</code></pre>
<ul>
<li>ç¡®è®¤é€»è¾‘å·å¤§å°è°ƒæ•´å’Œæ–‡ä»¶ç³»ç»Ÿæ‰©å±•æ˜¯å¦æˆåŠŸã€‚</li>
</ul>
<pre><code class="language-bash">df -h
</code></pre>
<ul>
<li>åœ¨ /etc/fstab ä¸­è®¾ç½®è‡ªåŠ¨æŒ‚è½½ã€‚</li>
</ul>
<pre><code class="language-bash">vi /etc/fstab
######æ–‡ä»¶ä¿®æ”¹å†…å®¹å¦‚ä¸‹######
UUID=bd0382af-caa1-4446-9215-085ad3fe4241 /home ext4  defaults  0 0
######æ–‡ä»¶ä¿®æ”¹å†…å®¹ç»“æŸ######
</code></pre>
<h2 id="é©±åŠ¨çš„æ›´æ–°æ›¿æ¢">ğŸ‘‡ é©±åŠ¨çš„æ›´æ–°æ›¿æ¢</h2>
<p><strong>å› ä¸ºæˆ‘ä½¿ç”¨çš„ç¡¬ä»¶å·®å¼‚ï¼Œç½‘å¡é©±åŠ¨æ–¹é¢éœ€è¦é¢å¤–ç¼–è¯‘äºŒæ¬¡å¼€å‘çš„æ–°é©±åŠ¨æ›¿æ¢é»˜è®¤é•œåƒçš„é©±åŠ¨ã€‚</strong></p>
<ul>
<li>å®‰è£… gcc ç¼–è¯‘ç¯å¢ƒï¼Œåˆ° gcc æ–‡ä»¶å¤¹è·¯å¾„ä¸‹ï¼Œrpm å®‰è£…ç¼–è¯‘ç¯å¢ƒã€‚</li>
</ul>
<pre><code class="language-bash">uname -r
mount /dev/sdb1 /mnt
cd /mnt/gcc-3.10.0-1160/
rpm -ivh * --nodeps --force
</code></pre>
<ul>
<li>ice é©±åŠ¨ï¼Œè¿›å…¥ src ç›®å½•ä¸‹ï¼Œè¿›è¡Œç¼–è¯‘å®‰è£…ã€‚</li>
</ul>
<pre><code class="language-bash">make
make install
</code></pre>
<ul>
<li>ixgbe é©±åŠ¨ï¼Œè¿›å…¥ src ç›®å½•ä¸‹ï¼Œè¿›è¡Œç¼–è¯‘å®‰è£…ã€‚</li>
</ul>
<pre><code class="language-bash">make
make install
</code></pre>
<ul>
<li>igc é©±åŠ¨ï¼Œi225ã€i226 ç½‘å¡é©±åŠ¨ï¼Œè¿›å…¥ igc ç›®å½•ä¸‹ï¼Œè¿›è¡Œç¼–è¯‘å®‰è£…ã€‚</li>
</ul>
<pre><code class="language-bash">./autorun.sh
</code></pre>
<h2 id="å®‰è£…-libevent-ç¯å¢ƒ">ğŸ‘‡ å®‰è£… Libevent ç¯å¢ƒ</h2>
<ul>
<li>æˆ‘æœ‰å·¥ç¨‹ä¾èµ–äº libevent ç¯å¢ƒï¼Œæ‰€ä»¥éœ€è¦å®‰è£…å®ƒï¼Œå¹¶æ›´æ–°åŠ¨æ€é“¾æ¥åº“ã€‚</li>
</ul>
<pre><code class="language-bash">tar -zxvf libevent-2.1.11-stable.tar.gz
cd libevent-2.1.11-stable
./configure
make
make install
ldconfig
</code></pre>
<h2 id="ç½‘å£å‘½åæ–¹å¼è°ƒæ•´">ğŸ‘‡ ç½‘å£å‘½åæ–¹å¼è°ƒæ•´</h2>
<ul>
<li>è°ƒæ•´ç½‘ç»œæ¥å£é‡æ–°å‘½åå›ä¼ ç»Ÿçš„ ethX æ ¼å¼ï¼Œå¯ä»¥é€šè¿‡ç¼–è¾‘ /etc/default/grub æ–‡ä»¶ï¼Œä¿®æ”¹ä¸º net.ifnames=0</li>
</ul>
<pre><code class="language-bash">GRUB_CMDLINE_LINUX=&quot;crashkernel=auto rd.lvm.lv=centos/root rd.lvm.lv=centos/swap console=ttyS0,115200n8 net.ifnames=0 biosdevname=0&quot;
</code></pre>
<h2 id="ç³»ç»Ÿæºå¤±è´¥é—®é¢˜">ğŸ‘‡ ç³»ç»Ÿæºå¤±è´¥é—®é¢˜</h2>
<ul>
<li>æ·»åŠ  nameserverï¼Œè§£å†³ç½‘ç»œé—®é¢˜ã€‚</li>
</ul>
<pre><code class="language-bash">vi /etc/resolv.conf
######æ–‡ä»¶ä¿®æ”¹å†…å®¹å¦‚ä¸‹######
nameserver 8.8.8.8
nameserver 8.8.8.4
nameserver 8.8.4.4
######æ–‡ä»¶ä¿®æ”¹å†…å®¹ç»“æŸ######
</code></pre>
<ul>
<li>åˆ é™¤æœ¬åœ°æºï¼Œä¸‹è½½é˜¿é‡Œäº‘é…ç½®ï¼Œè§£å†³æºé—®é¢˜ã€‚</li>
</ul>
<pre><code class="language-bash">rm  /etc/yum.repos.d/*
wget -O /etc/yum.repos.d/CentOS-Base.repo https://mirrors.aliyun.com/repo/Centos-7.repo
yum install git ssh
</code></pre>
<h2 id="ç”Ÿæˆ-grub-é…ç½®">ğŸ‘‡ ç”Ÿæˆ GRUB é…ç½®</h2>
<ul>
<li>é‡æ–°ç”Ÿæˆé…ç½®ï¼Œå¹¶æ›´æ–°å†…æ ¸å‚æ•°ã€‚</li>
</ul>
<pre><code class="language-bash">grub2-mkconfig -o /boot/grub2/grub.cfg
</code></pre>
<h2 id="åˆ›å»ºå…¬é’¥ç§é’¥">ğŸ‘‡ åˆ›å»ºå…¬é’¥ç§é’¥</h2>
<ul>
<li>æ–‡ä»¶ä½äº /root/.ssh/ï¼Œå…¶ä¸­ id_rsa ä¸ºç§é’¥ï¼Œid_rsa.pub ä¸ºå…¬é’¥ï¼Œæ¥ä¸‹æ¥æ‰“å¼€ id_rsa.pubï¼Œæ›¿æ¢è‡³åŸæœ¬çš„ã€‚ä¿®æ”¹ç§é’¥æ–‡ä»¶çš„æƒé™ï¼Œç¡®ä¿åªæœ‰æ‰€æœ‰è€…å¯ä»¥è¯»å†™ï¼Œè€Œå…¶ä»–ç”¨æˆ·æ²¡æœ‰æƒé™ã€‚</li>
</ul>
<pre><code class="language-bash">ssh-keygen -t rsa
chmod 600 /root/.ssh/id_rsa
</code></pre>
<h2 id="å®‰è£…å¸¸ç”¨å·¥å…·">ğŸ‘‡ å®‰è£…å¸¸ç”¨å·¥å…·</h2>
<ul>
<li>å®‰è£…ä¸€äº›å¸¸ç”¨çš„å·¥å…·ã€‚</li>
</ul>
<pre><code class="language-bash">yum install net-tools
yum install git
yum install elfutils-libelf-devel
yum install nfs-utils
yum install xorriso
yum install centos-release-scl
yum install python3
yum install python3-pip
pip3 install requests
yum install devtoolset-8-gcc
yum install bash-completion
</code></pre>
<ul>
<li>ä¿®æ”¹æ–‡ä»¶ ~/.bashrcï¼Œé»˜è®¤ä½¿ç”¨é«˜ç‰ˆæœ¬ gccï¼Œä»¥åŠå¢åŠ  git å‘½ä»¤è”æƒ³ï¼ŒTab è‡ªåŠ¨è¡¥å…¨ã€‚</li>
</ul>
<pre><code class="language-bash">vi ~/.bashrc
######æ–‡ä»¶ä¿®æ”¹å†…å®¹å¦‚ä¸‹######
source scl_source enable devtoolset-8
source /usr/share/doc/git-*/contrib/completion/git-completion.bash
######æ–‡ä»¶ä¿®æ”¹å†…å®¹ç»“æŸ######
</code></pre>
<h2 id="åŒæ­¥è¿œç¨‹ç›®å½•">ğŸ‘‡ åŒæ­¥è¿œç¨‹ç›®å½•</h2>
<ul>
<li>é€šè¿‡ rsync å°†è¿œç¨‹æ–‡ä»¶å¤¹åŒæ­¥åˆ°æœ¬åœ°æ–‡ä»¶å¤¹ã€‚</li>
</ul>
<pre><code class="language-bash">rsync -avzh root@192.168.139.100:/data/huangyj /data/
</code></pre>
<h2 id="è®¾ç½®æ–‡ä»¶å¤¹æƒé™">ğŸ‘‡ è®¾ç½®æ–‡ä»¶å¤¹æƒé™</h2>
<ul>
<li>è®¾ç½®æ–‡ä»¶å¤¹å†…åªæœ‰ root ç”¨æˆ·æœ‰è¯»å†™æƒé™ï¼Œå…¶ä»–äººæ˜¯è¯»æƒé™ã€‚</li>
</ul>
<pre><code class="language-bash">sudo useradd newuser
sudo passwd newuser
sudo chown root:root /path/to/folder
sudo chmod 755 /path/to/folder
</code></pre>
<h2 id="æ­å»º-nfs-æœåŠ¡">ğŸ‘‡ æ­å»º NFS æœåŠ¡</h2>
<ul>
<li>å®‰è£… NFS æœåŠ¡å™¨è½¯ä»¶åŒ…ã€‚</li>
</ul>
<pre><code class="language-bash">sudo yum install nfs-utils
</code></pre>
<ul>
<li>é…ç½® NFS æœåŠ¡å™¨ã€‚</li>
</ul>
<pre><code class="language-bash">sudo vi /etc/exports
######æ–‡ä»¶ä¿®æ”¹å†…å®¹å¦‚ä¸‹######
/data/huangyj/centos-7_2009 *(rw,sync,no_root_squash,no_subtree_check)
/data/huangyj/centos-7_2009-hpc *(rw,sync,no_root_squash,no_subtree_check)
/data/huangyj/centos-8 *(rw,sync,no_root_squash,no_subtree_check)
/data/huangyj/centos-8-hpc *(rw,sync,no_root_squash,no_subtree_check)
######æ–‡ä»¶ä¿®æ”¹å†…å®¹ç»“æŸ######
</code></pre>
<ul>
<li>å¯åŠ¨å¹¶è®¾ç½® NFS æœåŠ¡å™¨å¼€æœºè‡ªå¯åŠ¨ã€‚</li>
</ul>
<pre><code class="language-bash">sudo systemctl start nfs-server
sudo systemctl enable nfs-server
</code></pre>
<ul>
<li>å¦‚æœç³»ç»Ÿä½¿ç”¨é˜²ç«å¢™ï¼Œç¡®ä¿å…è®¸ NFS æœåŠ¡é€šè¿‡é˜²ç«å¢™ã€‚</li>
</ul>
<pre><code class="language-bash">sudo firewall-cmd --permanent --zone=public --add-service=nfs
sudo firewall-cmd --reload
</code></pre>
<h2 id="æ­å»º-ftp-æœåŠ¡">ğŸ‘‡ æ­å»º FTP æœåŠ¡</h2>
<ul>
<li>å®‰è£… FTP æœåŠ¡å™¨è½¯ä»¶åŒ…ã€‚</li>
</ul>
<pre><code class="language-bash">sudo yum install vsftpd
</code></pre>
<ul>
<li>é…ç½® FTP æœåŠ¡å™¨ã€‚</li>
</ul>
<pre><code class="language-bash">sudo vi /etc/vsftpd/vsftpd.conf
######æ–‡ä»¶ä¿®æ”¹å†…å®¹å¦‚ä¸‹######
anon_root=/data/chfsfile/chfsfile
anonymous_enable=YES
allow_writeable_chroot=YES
anon_other_write_enable=YES
######æ–‡ä»¶ä¿®æ”¹å†…å®¹ç»“æŸ######
</code></pre>
<ul>
<li>å¯åŠ¨å¹¶è®¾ç½® FTP æœåŠ¡å™¨å¼€æœºè‡ªå¯åŠ¨ã€‚</li>
</ul>
<pre><code class="language-bash">sudo systemctl start vsftpd
sudo systemctl enable vsftpd
</code></pre>
<ul>
<li>å¦‚æœç³»ç»Ÿä½¿ç”¨é˜²ç«å¢™ï¼Œç¡®ä¿å…è®¸ FTP æœåŠ¡é€šè¿‡é˜²ç«å¢™ã€‚</li>
</ul>
<pre><code class="language-bash">sudo firewall-cmd --permanent --add-service=ftp
sudo firewall-cmd --reload
</code></pre>
<h2 id="æ­å»º-tftp-æœåŠ¡">ğŸ‘‡ æ­å»º TFTP æœåŠ¡</h2>
<ul>
<li>å®‰è£… TFTP æœåŠ¡å™¨è½¯ä»¶åŒ…ã€‚</li>
</ul>
<pre><code class="language-bash">sudo yum install xinetd tftp-server
</code></pre>
<ul>
<li>é…ç½® TFTP æœåŠ¡å™¨ã€‚</li>
</ul>
<pre><code class="language-bash">sudo vi /etc/xinetd.d/tftp
######æ–‡ä»¶ä¿®æ”¹å†…å®¹å¦‚ä¸‹######
service tftp
{
        socket_type             = dgram
        protocol                = udp
        wait                    = yes
        user                    = root
        server                  = /usr/sbin/in.tftpd
        server_args             = -s /data/chfsfile/chfsfile
        disable                 = no
        per_source              = 11
        cps                     = 100 2
        flags                   = IPv4
}
######æ–‡ä»¶ä¿®æ”¹å†…å®¹ç»“æŸ######
</code></pre>
<ul>
<li>å¯åŠ¨å¹¶è®¾ç½® TFTP æœåŠ¡å™¨å¼€æœºè‡ªå¯åŠ¨ã€‚</li>
</ul>
<pre><code class="language-bash">sudo systemctl start xinetd.service
sudo systemctl enable xinetd.service
</code></pre>
<ul>
<li>å¦‚æœ systemctl å¯åŠ¨æœåŠ¡çš„æ—¶å€™æŠ¥é”™ Errorï¼šno space left on device</li>
</ul>
<pre><code class="language-bash">sudo vi /etc/sysctl.conf
######æ–‡ä»¶ä¿®æ”¹å†…å®¹å¦‚ä¸‹######
fs.inotify.max_user_watches = 262144
######æ–‡ä»¶ä¿®æ”¹å†…å®¹ç»“æŸ######
</code></pre>
<ul>
<li>ä½¿é…ç½®ç”Ÿæ•ˆã€‚</li>
</ul>
<pre><code class="language-bash">sysctl -p
</code></pre>
<ul>
<li>å¦‚æœç³»ç»Ÿä½¿ç”¨é˜²ç«å¢™ï¼Œç¡®ä¿å…è®¸ TFTP æœåŠ¡é€šè¿‡é˜²ç«å¢™ã€‚</li>
</ul>
<pre><code class="language-bash">sudo firewall-cmd --permanent --add-service=tftp
sudo firewall-cmd --reload
</code></pre>
<h2 id="å®‰è£…å®å¡”é¢æ¿">ğŸ‘‡ å®‰è£…å®å¡”é¢æ¿</h2>
<ul>
<li>ä½¿ç”¨<a href="https://www.bt.cn/new/download.html">å®å¡”å®˜ç½‘å®‰è£…è„šæœ¬</a>ï¼ŒSSHå…³é—­å®å¡”å®‰å…¨å…¥å£ã€‚</li>
</ul>
<pre><code class="language-bash">rm -f /www/server/panel/data/admin_path.pl
sudo systemctl enable bt
</code></pre>
<h2 id="å†…ç½‘ç©¿é€æœåŠ¡">ğŸ‘‡ å†…ç½‘ç©¿é€æœåŠ¡</h2>
<ul>
<li>ä½¿ç”¨<a href="https://dashboard.cpolar.com/">cpolar</a>å®ç°å…è´¹å†…ç½‘ç©¿é€ã€‚</li>
</ul>
<pre><code class="language-bash">cpolar authtoken NmJmMTgwMzYtOTE5ZS00YmE0LWE1MDctYjUxYTQ3MDkyZGY2
# Authtoken saved to configuration file: /usr/local/etc/cpolar/cpolar.yml
authtoken: NmJmMTgwMzYtOTE5ZS00YmE0LWE1MDctYjUxYTQ3MDkyZGY2
tunnels:
  site:
    proto: http
    addr: &quot;88&quot;
    region: cn_vip_top
  bt:
    proto: tcp
    addr: &quot;8888&quot;
    region: cn_vip_top
</code></pre>
<h2 id="è®¾ç½®å¼€æœºè‡ªå¯åŠ¨">ğŸ‘‡ è®¾ç½®å¼€æœºè‡ªå¯åŠ¨</h2>
<ul>
<li>å¯ä»¥é€šè¿‡ä¿®æ”¹ rc.localï¼Œæ·»åŠ ä¸€äº›ç§æœ‰åŒ–è‡ªå¯åŠ¨æœåŠ¡ã€‚</li>
</ul>
<pre><code class="language-bash">sudo vi /etc/rc.local

######æ–‡ä»¶ä¿®æ”¹å†…å®¹å¦‚ä¸‹######
systemctl disable firewalld                                                 # æ°¸ä¹…ç¦ç”¨é˜²ç«å¢™æœ
chfs-linux-amd64-3.1 --file=/data/chfsfile/chfs.ini &amp;     # å¼€å¯æ–‡ä»¶å…±äº«æœåŠ¡å™¨
######æ–‡ä»¶ä¿®æ”¹å†…å®¹ç»“æŸ######
</code></pre>
<h2 id="å®‰è£…-docker-å®¹å™¨">ğŸ‘‡ å®‰è£… Docker å®¹å™¨</h2>
<ul>
<li>åˆ é™¤ Docker è½¯ä»¶åŒ…ã€‚</li>
</ul>
<pre><code class="language-bash">sudo yum remove docker-ce docker-ce-cli containerd.io
</code></pre>
<ul>
<li>å®‰è£… yum-utils æ˜¯ä¸ºæ–¹ä¾¿æ·»åŠ  yum æºä½¿ç”¨çš„ï¼Œdevice-mapper-persistent-data å’Œ lvm2 æ˜¯å‚¨å­˜è®¾å¤‡æ˜ å°„ (devicemapper) å¿…é¡»çš„ä¸¤ä¸ªè½¯ä»¶åŒ…ã€‚</li>
</ul>
<pre><code class="language-bash">sudo yum install -y yum-utils lvm2 device-mapper-persistent-data
</code></pre>
<ul>
<li>ç”±äºé»˜è®¤æ˜¯å›½å¤–çš„ yum æºï¼ŒåŸºæœ¬ä¸å¯ç”¨ï¼Œæˆ‘ä»¬è¿™è¾¹ä¿®æ”¹ä¸ºé˜¿é‡Œæºæˆ–æ¸…åæºã€‚</li>
</ul>
<pre><code class="language-bash">sudo yum-config-manager --add-repo http://mirrors.aliyun.com/docker-ce/linux/centos/docker-ce.repo
</code></pre>
<ul>
<li>æ›´æ–°ä¸‹ä¿®æ”¹çš„è½¯ä»¶æºã€‚</li>
</ul>
<pre><code class="language-bash">sudo yum makecache fast
</code></pre>
<ul>
<li>é»˜è®¤ç‰ˆæœ¬æ˜¯ ce çš„ç¨³å®šç‰ˆæœ¬ã€‚</li>
</ul>
<pre><code class="language-bash">sudo yum -y install docker-ce
</code></pre>
<ul>
<li>å®‰è£…å®Œæˆåæ‰§è¡Œå¦‚ä¸‹å‘½ä»¤æ£€æµ‹å®‰è£…æ˜¯å¦æˆåŠŸã€‚</li>
</ul>
<pre><code class="language-bash">docker version
</code></pre>
<ul>
<li><a href="https://cr.console.aliyun.com/cn-hangzhou/instances/mirrors">é˜¿é‡Œäº‘é•œåƒåŠ é€Ÿå™¨</a>é…ç½®ã€‚</li>
</ul>
<pre><code class="language-bash">sudo mkdir -p /etc/docker
sudo tee /etc/docker/daemon.json &lt;&lt;-'EOF'
{
  &quot;registry-mirrors&quot;: [&quot;https://e7glsap4.mirror.aliyuncs.com&quot;]
}
EOF
sudo systemctl daemon-reload
sudo systemctl restart docker
</code></pre>
<ul>
<li>è®¾ç½® Docker è‡ªå¯åŠ¨ã€‚</li>
</ul>
<pre><code class="language-bash">sudo systemctl start docker
sudo systemctl enable docker
</code></pre>
<ul>
<li>æµ‹è¯•æœç´¢å¹¶æ‹‰å–æ›´æ–°é•œåƒã€‚</li>
</ul>
<pre><code class="language-bash">docker search hello-world
docker pull hello-world
</code></pre>
<ul>
<li>å¦‚æœæœç´¢å¹¶æ‹‰å–æ›´æ–°é•œåƒå¤±è´¥ï¼Œå¯ä»¥æŸ¥çœ‹æœåŠ¡å™¨ DNS ç½‘ç»œé…ç½®ã€‚</li>
</ul>
<pre><code class="language-bash">vi /etc/resolv.conf
######æ–‡ä»¶ä¿®æ”¹å†…å®¹å¦‚ä¸‹######
nameserverÂ 8.8.8.8
nameserverÂ 8.8.8.4
nameserverÂ 8.8.4.4
######æ–‡ä»¶ä¿®æ”¹å†…å®¹ç»“æŸ######
</code></pre>
<h2 id="å®‰è£…-nascab-ç³»ç»Ÿ">ğŸ‘‡ å®‰è£… Nascab ç³»ç»Ÿ</h2>
<ul>
<li>Dockerå®‰è£…<a href="https://www.nascab.cn/docker.html">Nascab</a>ç³»ç»Ÿï¼Œå®ç°ç§æœ‰NASï¼</li>
</ul>
<pre><code class="language-bash">docker search nascab
docker pull ypptec/nascab
docker run -v /data/nascab/myData:/myData -v /data/nascab/nascabData:/root/.local/share/nascab -p 8080:80 -p 8090:90 -p 8443:443 -p 8021:21 -d --name nascab --privileged=true --log-opt max-size=10m --log-opt max-file=3 ypptec/nascab
</code></pre>
<ul>
<li>å¡«å‘ï¼šæ–‡ä»¶å†…æƒé™ä¸è¶³ä¼šå¯¼è‡´å¯åŠ¨ Docker å¤±è´¥ã€‚</li>
</ul>
<pre><code class="language-bash">docker exec -it nascab /bin/sh    # è¿›å…¥dockerå†…éƒ¨
docker images
docker rmi cf6ea82ce974
docker ps -a
docker rm nascab
docker logs nascab
netstat -tuln
</code></pre>
<ul>
<li>è®¾ç½® Docker æŸå®¹å™¨å¼€æœºè‡ªå¯åŠ¨ã€‚</li>
</ul>
<pre><code class="language-bash">docker update --restart=always å®¹å™¨ID(æˆ–è€…å®¹å™¨å)
</code></pre>
<h2 id="thank-you-for-browsingenjoy~">ğŸ˜˜ Thank you for browsingï¼ŒEnjoy~</h2>
]]></content>
    </entry>
</feed>